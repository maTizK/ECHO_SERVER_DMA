   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.fpu fpv4-sp-d16
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.thumb
  15              		.file	"spi.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.comm	bufferTX,2000,4
  20              		.comm	bufferRX,2000,4
  21              		.comm	bufferRXidx,4,4
  22              		.comm	bufferTXidx,4,4
  23              		.comm	dat_lengthRX,4,4
  24              		.comm	dat_lengthTX,4,4
  25              		.comm	xSemaphoreDMASPI,4,4
  26              		.section	.bss.xHigherPriorityTaskWoken,"aw",%nobits
  27              		.align	2
  30              	xHigherPriorityTaskWoken:
  31 0000 00000000 		.space	4
  32              		.comm	set_macTaskHandle,4,4
  33              		.section	.text.init_SPI1,"ax",%progbits
  34              		.align	2
  35              		.global	init_SPI1
  36              		.thumb
  37              		.thumb_func
  39              	init_SPI1:
  40              	.LFB110:
  41              		.file 1 "App/STM32F4-Discovery/spi.c"
   1:App/STM32F4-Discovery/spi.c **** #include <stm32f4xx.h>
   2:App/STM32F4-Discovery/spi.c **** #include <stm32f4xx_spi.h>
   3:App/STM32F4-Discovery/spi.c **** #include <stm32f4xx_dma.h>
   4:App/STM32F4-Discovery/spi.c **** #include <stm32f4xx_rcc.h>
   5:App/STM32F4-Discovery/spi.c **** #include <stm32f4xx_gpio.h>
   6:App/STM32F4-Discovery/spi.c **** #include "spi.h"
   7:App/STM32F4-Discovery/spi.c **** #include "W5200.h"
   8:App/STM32F4-Discovery/spi.c **** #include <stdio.h>	
   9:App/STM32F4-Discovery/spi.c **** #define RESET_LOW()	GPIOA->BSRRL |= GPIO_Pin_3;
  10:App/STM32F4-Discovery/spi.c **** #define RESET_HIGH()    GPIOA->BSRRH |= GPIO_Pin_3;
  11:App/STM32F4-Discovery/spi.c **** #define CSON()		GPIOA->BSRRH |= GPIO_Pin_4; // chip select  
  12:App/STM32F4-Discovery/spi.c **** #define CSOFF()		GPIOA->BSRRL |= GPIO_Pin_4; // chip select  
  13:App/STM32F4-Discovery/spi.c **** 
  14:App/STM32F4-Discovery/spi.c **** 
  15:App/STM32F4-Discovery/spi.c **** /* ----------------------------------------------------------*/
  16:App/STM32F4-Discovery/spi.c **** /* --    this function initializes the SPI1 peripheral     --*/
  17:App/STM32F4-Discovery/spi.c **** 
  18:App/STM32F4-Discovery/spi.c **** 
  19:App/STM32F4-Discovery/spi.c **** /* initialize SPI1 */
  20:App/STM32F4-Discovery/spi.c **** void init_SPI1(void){
  42              		.loc 1 20 0
  43              		.cfi_startproc
  44              		@ args = 0, pretend = 0, frame = 104
  45              		@ frame_needed = 1, uses_anonymous_args = 0
  46 0000 80B5     		push	{r7, lr}
  47              	.LCFI0:
  48              		.cfi_def_cfa_offset 8
  49              		.cfi_offset 7, -8
  50              		.cfi_offset 14, -4
  51 0002 9AB0     		sub	sp, sp, #104
  52              	.LCFI1:
  53              		.cfi_def_cfa_offset 112
  54 0004 00AF     		add	r7, sp, #0
  55              	.LCFI2:
  56              		.cfi_def_cfa_register 7
  21:App/STM32F4-Discovery/spi.c **** 	
  22:App/STM32F4-Discovery/spi.c **** 	GPIO_InitTypeDef GPIO_InitStruct;
  23:App/STM32F4-Discovery/spi.c **** 	SPI_InitTypeDef SPI_InitStruct;
  24:App/STM32F4-Discovery/spi.c **** 	DMA_InitTypeDef DMA_InitStruct;
  25:App/STM32F4-Discovery/spi.c **** 	NVIC_InitTypeDef NVIC_InitStruct;
  26:App/STM32F4-Discovery/spi.c **** 
  27:App/STM32F4-Discovery/spi.c **** 	
  28:App/STM32F4-Discovery/spi.c **** 	
  29:App/STM32F4-Discovery/spi.c **** 	// enable clock for used IO pins
  30:App/STM32F4-Discovery/spi.c **** 	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);
  57              		.loc 1 30 0
  58 0006 0120     		movs	r0, #1
  59 0008 0121     		movs	r1, #1
  60 000a FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
  31:App/STM32F4-Discovery/spi.c **** 	
  32:App/STM32F4-Discovery/spi.c **** 	/* configure pins used by SPI1
  33:App/STM32F4-Discovery/spi.c **** 	 * PA5 = SCK
  34:App/STM32F4-Discovery/spi.c **** 	 * PA6 = MISO
  35:App/STM32F4-Discovery/spi.c **** 	 * PA7 = MOSI
  36:App/STM32F4-Discovery/spi.c **** 	 */
  37:App/STM32F4-Discovery/spi.c **** 	// MOSI PA7
  38:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Pin = SPIx_MOSI_PIN ;
  61              		.loc 1 38 0
  62 000e 8023     		movs	r3, #128
  63 0010 3B66     		str	r3, [r7, #96]
  39:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Mode = GPIO_Mode_AF;
  64              		.loc 1 39 0
  65 0012 0223     		movs	r3, #2
  66 0014 87F86430 		strb	r3, [r7, #100]
  40:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_OType = GPIO_OType_PP;
  67              		.loc 1 40 0
  68 0018 0023     		movs	r3, #0
  69 001a 87F86630 		strb	r3, [r7, #102]
  41:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Speed = GPIO_Speed_100MHz;
  70              		.loc 1 41 0
  71 001e 0323     		movs	r3, #3
  72 0020 87F86530 		strb	r3, [r7, #101]
  42:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_PuPd = GPIO_PuPd_DOWN;
  73              		.loc 1 42 0
  74 0024 0223     		movs	r3, #2
  75 0026 87F86730 		strb	r3, [r7, #103]
  43:App/STM32F4-Discovery/spi.c **** 	GPIO_Init(GPIOA, &GPIO_InitStruct);
  76              		.loc 1 43 0
  77 002a 07F16003 		add	r3, r7, #96
  78 002e A948     		ldr	r0, .L4
  79 0030 1946     		mov	r1, r3
  80 0032 FFF7FEFF 		bl	GPIO_Init
  44:App/STM32F4-Discovery/spi.c **** 	// SCK PA5
  45:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Pin = SPIx_SCK_PIN;
  81              		.loc 1 45 0
  82 0036 2023     		movs	r3, #32
  83 0038 3B66     		str	r3, [r7, #96]
  46:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Mode = GPIO_Mode_AF;
  84              		.loc 1 46 0
  85 003a 0223     		movs	r3, #2
  86 003c 87F86430 		strb	r3, [r7, #100]
  47:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_OType = GPIO_OType_PP;
  87              		.loc 1 47 0
  88 0040 0023     		movs	r3, #0
  89 0042 87F86630 		strb	r3, [r7, #102]
  48:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Speed = GPIO_Speed_100MHz;
  90              		.loc 1 48 0
  91 0046 0323     		movs	r3, #3
  92 0048 87F86530 		strb	r3, [r7, #101]
  49:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_PuPd = GPIO_PuPd_DOWN;
  93              		.loc 1 49 0
  94 004c 0223     		movs	r3, #2
  95 004e 87F86730 		strb	r3, [r7, #103]
  50:App/STM32F4-Discovery/spi.c **** 	GPIO_Init(GPIOA, &GPIO_InitStruct);
  96              		.loc 1 50 0
  97 0052 07F16003 		add	r3, r7, #96
  98 0056 9F48     		ldr	r0, .L4
  99 0058 1946     		mov	r1, r3
 100 005a FFF7FEFF 		bl	GPIO_Init
  51:App/STM32F4-Discovery/spi.c **** 	// MISO PA6
  52:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Pin = SPIx_MISO_PIN;
 101              		.loc 1 52 0
 102 005e 4023     		movs	r3, #64
 103 0060 3B66     		str	r3, [r7, #96]
  53:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Mode = GPIO_Mode_AF;
 104              		.loc 1 53 0
 105 0062 0223     		movs	r3, #2
 106 0064 87F86430 		strb	r3, [r7, #100]
  54:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_OType = GPIO_OType_OD;
 107              		.loc 1 54 0
 108 0068 0123     		movs	r3, #1
 109 006a 87F86630 		strb	r3, [r7, #102]
  55:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Speed = GPIO_Speed_100MHz;
 110              		.loc 1 55 0
 111 006e 0323     		movs	r3, #3
 112 0070 87F86530 		strb	r3, [r7, #101]
  56:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_PuPd = GPIO_PuPd_NOPULL;
 113              		.loc 1 56 0
 114 0074 0023     		movs	r3, #0
 115 0076 87F86730 		strb	r3, [r7, #103]
  57:App/STM32F4-Discovery/spi.c **** 	GPIO_Init(GPIOA, &GPIO_InitStruct);
 116              		.loc 1 57 0
 117 007a 07F16003 		add	r3, r7, #96
 118 007e 9548     		ldr	r0, .L4
 119 0080 1946     		mov	r1, r3
 120 0082 FFF7FEFF 		bl	GPIO_Init
  58:App/STM32F4-Discovery/spi.c **** 	
  59:App/STM32F4-Discovery/spi.c **** 	// connect SPI1 pins to SPI alternate function
  60:App/STM32F4-Discovery/spi.c **** 	GPIO_PinAFConfig(GPIOA, GPIO_PinSource5, GPIO_AF_SPI1);
 121              		.loc 1 60 0
 122 0086 9348     		ldr	r0, .L4
 123 0088 0521     		movs	r1, #5
 124 008a 0522     		movs	r2, #5
 125 008c FFF7FEFF 		bl	GPIO_PinAFConfig
  61:App/STM32F4-Discovery/spi.c **** 	GPIO_PinAFConfig(GPIOA, GPIO_PinSource6, GPIO_AF_SPI1);
 126              		.loc 1 61 0
 127 0090 9048     		ldr	r0, .L4
 128 0092 0621     		movs	r1, #6
 129 0094 0522     		movs	r2, #5
 130 0096 FFF7FEFF 		bl	GPIO_PinAFConfig
  62:App/STM32F4-Discovery/spi.c **** 	GPIO_PinAFConfig(GPIOA, GPIO_PinSource7, GPIO_AF_SPI1);
 131              		.loc 1 62 0
 132 009a 8E48     		ldr	r0, .L4
 133 009c 0721     		movs	r1, #7
 134 009e 0522     		movs	r2, #5
 135 00a0 FFF7FEFF 		bl	GPIO_PinAFConfig
  63:App/STM32F4-Discovery/spi.c **** 
  64:App/STM32F4-Discovery/spi.c **** 	
  65:App/STM32F4-Discovery/spi.c **** 	/* Configure the chip select pin
  66:App/STM32F4-Discovery/spi.c **** 	   in this case we will use PA4 */
  67:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Pin = GPIO_Pin_4;
 136              		.loc 1 67 0
 137 00a4 1023     		movs	r3, #16
 138 00a6 3B66     		str	r3, [r7, #96]
  68:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Mode = GPIO_Mode_OUT;
 139              		.loc 1 68 0
 140 00a8 0123     		movs	r3, #1
 141 00aa 87F86430 		strb	r3, [r7, #100]
  69:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_OType = GPIO_OType_PP;
 142              		.loc 1 69 0
 143 00ae 0023     		movs	r3, #0
 144 00b0 87F86630 		strb	r3, [r7, #102]
  70:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Speed = GPIO_Speed_100MHz;
 145              		.loc 1 70 0
 146 00b4 0323     		movs	r3, #3
 147 00b6 87F86530 		strb	r3, [r7, #101]
  71:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_PuPd = GPIO_PuPd_UP;
 148              		.loc 1 71 0
 149 00ba 0123     		movs	r3, #1
 150 00bc 87F86730 		strb	r3, [r7, #103]
  72:App/STM32F4-Discovery/spi.c **** 	GPIO_Init(GPIOA, &GPIO_InitStruct);
 151              		.loc 1 72 0
 152 00c0 07F16003 		add	r3, r7, #96
 153 00c4 8348     		ldr	r0, .L4
 154 00c6 1946     		mov	r1, r3
 155 00c8 FFF7FEFF 		bl	GPIO_Init
  73:App/STM32F4-Discovery/spi.c **** 	
  74:App/STM32F4-Discovery/spi.c **** 	GPIOA->BSRRL |= GPIO_Pin_4; // set PA4 high
 156              		.loc 1 74 0
 157 00cc 814B     		ldr	r3, .L4
 158 00ce 814A     		ldr	r2, .L4
 159 00d0 128B     		ldrh	r2, [r2, #24]	@ movhi
 160 00d2 92B2     		uxth	r2, r2
 161 00d4 42F01002 		orr	r2, r2, #16
 162 00d8 92B2     		uxth	r2, r2
 163 00da 1A83     		strh	r2, [r3, #24]	@ movhi
  75:App/STM32F4-Discovery/spi.c **** 
  76:App/STM32F4-Discovery/spi.c **** 	/* Configure the hard reset pin
  77:App/STM32F4-Discovery/spi.c **** 	   in this case we will use PA3 */
  78:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Pin = GPIO_Pin_3;
 164              		.loc 1 78 0
 165 00dc 0823     		movs	r3, #8
 166 00de 3B66     		str	r3, [r7, #96]
  79:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Mode = GPIO_Mode_OUT;
 167              		.loc 1 79 0
 168 00e0 0123     		movs	r3, #1
 169 00e2 87F86430 		strb	r3, [r7, #100]
  80:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_OType = GPIO_OType_PP;
 170              		.loc 1 80 0
 171 00e6 0023     		movs	r3, #0
 172 00e8 87F86630 		strb	r3, [r7, #102]
  81:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Speed = GPIO_Speed_100MHz;
 173              		.loc 1 81 0
 174 00ec 0323     		movs	r3, #3
 175 00ee 87F86530 		strb	r3, [r7, #101]
  82:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_PuPd = GPIO_PuPd_UP;
 176              		.loc 1 82 0
 177 00f2 0123     		movs	r3, #1
 178 00f4 87F86730 		strb	r3, [r7, #103]
  83:App/STM32F4-Discovery/spi.c **** 	GPIO_Init(GPIOA, &GPIO_InitStruct);
 179              		.loc 1 83 0
 180 00f8 07F16003 		add	r3, r7, #96
 181 00fc 7548     		ldr	r0, .L4
 182 00fe 1946     		mov	r1, r3
 183 0100 FFF7FEFF 		bl	GPIO_Init
  84:App/STM32F4-Discovery/spi.c **** 	
  85:App/STM32F4-Discovery/spi.c **** 	GPIOA->BSRRL |= GPIO_Pin_3; // set PA3 high
 184              		.loc 1 85 0
 185 0104 734B     		ldr	r3, .L4
 186 0106 734A     		ldr	r2, .L4
 187 0108 128B     		ldrh	r2, [r2, #24]	@ movhi
 188 010a 92B2     		uxth	r2, r2
 189 010c 42F00802 		orr	r2, r2, #8
 190 0110 92B2     		uxth	r2, r2
 191 0112 1A83     		strh	r2, [r3, #24]	@ movhi
  86:App/STM32F4-Discovery/spi.c **** 
  87:App/STM32F4-Discovery/spi.c **** 	// enable peripheral clock
  88:App/STM32F4-Discovery/spi.c **** 	RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1, ENABLE);
 192              		.loc 1 88 0
 193 0114 4FF48050 		mov	r0, #4096
 194 0118 0121     		movs	r1, #1
 195 011a FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  89:App/STM32F4-Discovery/spi.c **** 	
  90:App/STM32F4-Discovery/spi.c **** 	/* configure SPI1 in Mode 0 
  91:App/STM32F4-Discovery/spi.c **** 	 * CPOL = 0 --> clock is low when idle
  92:App/STM32F4-Discovery/spi.c **** 	 * CPHA = 0 --> data is sampled at the first edge
  93:App/STM32F4-Discovery/spi.c **** 	 */
  94:App/STM32F4-Discovery/spi.c **** 	SPI_InitStruct.SPI_Direction = SPI_Direction_2Lines_FullDuplex; // set to full duplex mode, sepera
 196              		.loc 1 94 0
 197 011e 0023     		movs	r3, #0
 198 0120 A7F84C30 		strh	r3, [r7, #76]	@ movhi
  95:App/STM32F4-Discovery/spi.c **** 	SPI_InitStruct.SPI_Mode = SPI_Mode_Master;     // transmit in master mode, NSS pin has to be alway
 199              		.loc 1 95 0
 200 0124 4FF48273 		mov	r3, #260
 201 0128 A7F84E30 		strh	r3, [r7, #78]	@ movhi
  96:App/STM32F4-Discovery/spi.c **** 	SPI_InitStruct.SPI_DataSize = SPI_DataSize_8b; // one packet of data is 8 bits wide
 202              		.loc 1 96 0
 203 012c 0023     		movs	r3, #0
 204 012e A7F85030 		strh	r3, [r7, #80]	@ movhi
  97:App/STM32F4-Discovery/spi.c **** 	SPI_InitStruct.SPI_CPOL = SPI_CPOL_Low;        // clock is low when idle
 205              		.loc 1 97 0
 206 0132 0023     		movs	r3, #0
 207 0134 A7F85230 		strh	r3, [r7, #82]	@ movhi
  98:App/STM32F4-Discovery/spi.c **** 	SPI_InitStruct.SPI_CPHA = SPI_CPHA_1Edge;      // data sampled at second edge
 208              		.loc 1 98 0
 209 0138 0023     		movs	r3, #0
 210 013a A7F85430 		strh	r3, [r7, #84]	@ movhi
  99:App/STM32F4-Discovery/spi.c **** 	SPI_InitStruct.SPI_NSS = SPI_NSS_Soft | SPI_NSSInternalSoft_Set; // set the NSS management to inte
 211              		.loc 1 99 0
 212 013e 4FF44073 		mov	r3, #768
 213 0142 A7F85630 		strh	r3, [r7, #86]	@ movhi
 100:App/STM32F4-Discovery/spi.c **** 	SPI_InitStruct.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_4; // SPI frequency is APB2 frequency
 214              		.loc 1 100 0
 215 0146 0823     		movs	r3, #8
 216 0148 A7F85830 		strh	r3, [r7, #88]	@ movhi
 101:App/STM32F4-Discovery/spi.c **** 	SPI_InitStruct.SPI_FirstBit = SPI_FirstBit_MSB;// data is transmitted MSB first
 217              		.loc 1 101 0
 218 014c 0023     		movs	r3, #0
 219 014e A7F85A30 		strh	r3, [r7, #90]	@ movhi
 102:App/STM32F4-Discovery/spi.c **** 	SPI_Init(SPI1, &SPI_InitStruct); 
 220              		.loc 1 102 0
 221 0152 07F14C03 		add	r3, r7, #76
 222 0156 6048     		ldr	r0, .L4+4
 223 0158 1946     		mov	r1, r3
 224 015a FFF7FEFF 		bl	SPI_Init
 103:App/STM32F4-Discovery/spi.c **** 	
 104:App/STM32F4-Discovery/spi.c **** 	SPI_Cmd(SPI1, ENABLE);			
 225              		.loc 1 104 0
 226 015e 5E48     		ldr	r0, .L4+4
 227 0160 0121     		movs	r1, #1
 228 0162 FFF7FEFF 		bl	SPI_Cmd
 105:App/STM32F4-Discovery/spi.c **** 	
 106:App/STM32F4-Discovery/spi.c **** 
 107:App/STM32F4-Discovery/spi.c **** 	/* setup DMA */
 108:App/STM32F4-Discovery/spi.c **** 
 109:App/STM32F4-Discovery/spi.c **** 	// enable clock 
 110:App/STM32F4-Discovery/spi.c **** 	RCC_AHB1PeriphClockCmd (SPIx_DMA_CLK, ENABLE); 
 229              		.loc 1 110 0
 230 0166 4FF48000 		mov	r0, #4194304
 231 016a 0121     		movs	r1, #1
 232 016c FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
 111:App/STM32F4-Discovery/spi.c **** 	
 112:App/STM32F4-Discovery/spi.c **** 	// start with blank DMA configuration
 113:App/STM32F4-Discovery/spi.c **** 	DMA_DeInit (SPIx_TX_DMA_STREAM);
 233              		.loc 1 113 0
 234 0170 5A48     		ldr	r0, .L4+8
 235 0172 FFF7FEFF 		bl	DMA_DeInit
 114:App/STM32F4-Discovery/spi.c **** 	DMA_DeInit (SPIx_RX_DMA_STREAM);
 236              		.loc 1 114 0
 237 0176 5A48     		ldr	r0, .L4+12
 238 0178 FFF7FEFF 		bl	DMA_DeInit
 115:App/STM32F4-Discovery/spi.c **** 
 116:App/STM32F4-Discovery/spi.c **** 	// check if DMA stream is disabled before enabling 
 117:App/STM32F4-Discovery/spi.c **** 	// this is useful when stream is enabled and disabled multiple times. 
 118:App/STM32F4-Discovery/spi.c **** 	while (DMA_GetCmdStatus (SPIx_TX_DMA_STREAM) != DISABLE);
 239              		.loc 1 118 0
 240 017c 00BF     		nop
 241              	.L2:
 242              		.loc 1 118 0 is_stmt 0 discriminator 1
 243 017e 5748     		ldr	r0, .L4+8
 244 0180 FFF7FEFF 		bl	DMA_GetCmdStatus
 245 0184 0346     		mov	r3, r0
 246 0186 002B     		cmp	r3, #0
 247 0188 F9D1     		bne	.L2
 119:App/STM32F4-Discovery/spi.c **** 	while (DMA_GetCmdStatus (SPIx_RX_DMA_STREAM) != DISABLE);
 248              		.loc 1 119 0 is_stmt 1
 249 018a 00BF     		nop
 250              	.L3:
 251              		.loc 1 119 0 is_stmt 0 discriminator 1
 252 018c 5448     		ldr	r0, .L4+12
 253 018e FFF7FEFF 		bl	DMA_GetCmdStatus
 254 0192 0346     		mov	r3, r0
 255 0194 002B     		cmp	r3, #0
 256 0196 F9D1     		bne	.L3
 120:App/STM32F4-Discovery/spi.c **** 	
 121:App/STM32F4-Discovery/spi.c **** 	
 122:App/STM32F4-Discovery/spi.c **** 	DMA_StructInit(&DMA_InitStruct);
 257              		.loc 1 122 0 is_stmt 1
 258 0198 07F11003 		add	r3, r7, #16
 259 019c 1846     		mov	r0, r3
 260 019e FFF7FEFF 		bl	DMA_StructInit
 123:App/STM32F4-Discovery/spi.c ****   	//Configure DMA Initialization Structure
 124:App/STM32F4-Discovery/spi.c **** 	//DMA_InitStruct.DMA_FIFOMode = DMA_FIFOMode_Disable ;
 125:App/STM32F4-Discovery/spi.c ****  	//DMA_InitStruct.DMA_FIFOThreshold = DMA_FIFOThreshold_HalfFull ;
 126:App/STM32F4-Discovery/spi.c ****   	//DMA_InitStruct.DMA_MemoryBurst = DMA_MemoryBurst_Single ;
 127:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_MemoryDataSize = DMA_MemoryDataSize_Byte;
 261              		.loc 1 127 0
 262 01a2 0023     		movs	r3, #0
 263 01a4 3B63     		str	r3, [r7, #48]
 128:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_MemoryInc = DMA_MemoryInc_Enable;
 264              		.loc 1 128 0
 265 01a6 4FF48063 		mov	r3, #1024
 266 01aa BB62     		str	r3, [r7, #40]
 129:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_Mode = DMA_Mode_Normal;
 267              		.loc 1 129 0
 268 01ac 0023     		movs	r3, #0
 269 01ae 7B63     		str	r3, [r7, #52]
 130:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_PeripheralBaseAddr =(uint32_t) (&(SPIx->DR)) ;
 270              		.loc 1 130 0
 271 01b0 4C4B     		ldr	r3, .L4+16
 272 01b2 7B61     		str	r3, [r7, #20]
 131:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_PeripheralBurst = DMA_PeripheralBurst_Single;
 273              		.loc 1 131 0
 274 01b4 0023     		movs	r3, #0
 275 01b6 BB64     		str	r3, [r7, #72]
 132:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;
 276              		.loc 1 132 0
 277 01b8 0023     		movs	r3, #0
 278 01ba FB62     		str	r3, [r7, #44]
 133:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
 279              		.loc 1 133 0
 280 01bc 0023     		movs	r3, #0
 281 01be 7B62     		str	r3, [r7, #36]
 134:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_Priority = DMA_Priority_High;
 282              		.loc 1 134 0
 283 01c0 4FF40033 		mov	r3, #131072
 284 01c4 BB63     		str	r3, [r7, #56]
 135:App/STM32F4-Discovery/spi.c ****   	// Configure TX DMA 
 136:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_Channel = SPIx_TX_DMA_CHANNEL ;
 285              		.loc 1 136 0
 286 01c6 4FF0C063 		mov	r3, #100663296
 287 01ca 3B61     		str	r3, [r7, #16]
 137:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_DIR = DMA_DIR_MemoryToPeripheral ;
 288              		.loc 1 137 0
 289 01cc 4023     		movs	r3, #64
 290 01ce FB61     		str	r3, [r7, #28]
 138:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_Memory0BaseAddr = (uint32_t) &bufferTX ;
 291              		.loc 1 138 0
 292 01d0 454B     		ldr	r3, .L4+20
 293 01d2 BB61     		str	r3, [r7, #24]
 139:App/STM32F4-Discovery/spi.c **** 	DMA_InitStruct.DMA_BufferSize = MAX_BUFFER_LENGTH;
 294              		.loc 1 139 0
 295 01d4 4FF4FA63 		mov	r3, #2000
 296 01d8 3B62     		str	r3, [r7, #32]
 140:App/STM32F4-Discovery/spi.c ****   	DMA_Init(SPIx_TX_DMA_STREAM, &DMA_InitStruct);
 297              		.loc 1 140 0
 298 01da 07F11003 		add	r3, r7, #16
 299 01de 3F48     		ldr	r0, .L4+8
 300 01e0 1946     		mov	r1, r3
 301 01e2 FFF7FEFF 		bl	DMA_Init
 141:App/STM32F4-Discovery/spi.c **** 	// Configure RX DMA 
 142:App/STM32F4-Discovery/spi.c ****   	DMA_InitStruct.DMA_Channel = SPIx_RX_DMA_CHANNEL ;
 302              		.loc 1 142 0
 303 01e6 4FF0C063 		mov	r3, #100663296
 304 01ea 3B61     		str	r3, [r7, #16]
 143:App/STM32F4-Discovery/spi.c **** 	DMA_InitStruct.DMA_DIR = DMA_DIR_PeripheralToMemory ;
 305              		.loc 1 143 0
 306 01ec 0023     		movs	r3, #0
 307 01ee FB61     		str	r3, [r7, #28]
 144:App/STM32F4-Discovery/spi.c **** 	DMA_InitStruct.DMA_Memory0BaseAddr = (uint32_t)&bufferRX; 
 308              		.loc 1 144 0
 309 01f0 3E4B     		ldr	r3, .L4+24
 310 01f2 BB61     		str	r3, [r7, #24]
 145:App/STM32F4-Discovery/spi.c **** 	DMA_InitStruct.DMA_BufferSize = MAX_BUFFER_LENGTH;
 311              		.loc 1 145 0
 312 01f4 4FF4FA63 		mov	r3, #2000
 313 01f8 3B62     		str	r3, [r7, #32]
 146:App/STM32F4-Discovery/spi.c **** 	DMA_Init(SPIx_RX_DMA_STREAM, &DMA_InitStruct);	
 314              		.loc 1 146 0
 315 01fa 07F11003 		add	r3, r7, #16
 316 01fe 3848     		ldr	r0, .L4+12
 317 0200 1946     		mov	r1, r3
 318 0202 FFF7FEFF 		bl	DMA_Init
 147:App/STM32F4-Discovery/spi.c **** 	
 148:App/STM32F4-Discovery/spi.c **** 	DMA_ITConfig(SPIx_TX_DMA_STREAM, DMA_IT_TC, ENABLE); 
 319              		.loc 1 148 0
 320 0206 3548     		ldr	r0, .L4+8
 321 0208 1021     		movs	r1, #16
 322 020a 0122     		movs	r2, #1
 323 020c FFF7FEFF 		bl	DMA_ITConfig
 149:App/STM32F4-Discovery/spi.c **** 	DMA_ITConfig(SPIx_RX_DMA_STREAM, DMA_IT_TC, ENABLE); 
 324              		.loc 1 149 0
 325 0210 3348     		ldr	r0, .L4+12
 326 0212 1021     		movs	r1, #16
 327 0214 0122     		movs	r2, #1
 328 0216 FFF7FEFF 		bl	DMA_ITConfig
 150:App/STM32F4-Discovery/spi.c ****   
 151:App/STM32F4-Discovery/spi.c **** 	SPI_I2S_ClearFlag(SPIx, SPI_I2S_FLAG_TXE);
 329              		.loc 1 151 0
 330 021a 2F48     		ldr	r0, .L4+4
 331 021c 0221     		movs	r1, #2
 332 021e FFF7FEFF 		bl	SPI_I2S_ClearFlag
 152:App/STM32F4-Discovery/spi.c **** 	SPI_I2S_ClearFlag(SPIx, SPI_I2S_FLAG_RXNE);
 333              		.loc 1 152 0
 334 0222 2D48     		ldr	r0, .L4+4
 335 0224 0121     		movs	r1, #1
 336 0226 FFF7FEFF 		bl	SPI_I2S_ClearFlag
 153:App/STM32F4-Discovery/spi.c ****   	
 154:App/STM32F4-Discovery/spi.c **** 	// enable the interrupt in the NVIC
 155:App/STM32F4-Discovery/spi.c ****  	NVIC_InitStruct.NVIC_IRQChannel = DMA2_Stream3_IRQn;
 337              		.loc 1 155 0
 338 022a 3B23     		movs	r3, #59
 339 022c 3B73     		strb	r3, [r7, #12]
 156:App/STM32F4-Discovery/spi.c ****   	NVIC_InitStruct.NVIC_IRQChannelPreemptionPriority = 0x1;
 340              		.loc 1 156 0
 341 022e 0123     		movs	r3, #1
 342 0230 7B73     		strb	r3, [r7, #13]
 157:App/STM32F4-Discovery/spi.c ****  	NVIC_InitStruct.NVIC_IRQChannelSubPriority = 0x0;
 343              		.loc 1 157 0
 344 0232 0023     		movs	r3, #0
 345 0234 BB73     		strb	r3, [r7, #14]
 158:App/STM32F4-Discovery/spi.c ****   	NVIC_InitStruct.NVIC_IRQChannelCmd = ENABLE;
 346              		.loc 1 158 0
 347 0236 0123     		movs	r3, #1
 348 0238 FB73     		strb	r3, [r7, #15]
 159:App/STM32F4-Discovery/spi.c ****   	NVIC_Init (&NVIC_InitStruct);
 349              		.loc 1 159 0
 350 023a 07F10C03 		add	r3, r7, #12
 351 023e 1846     		mov	r0, r3
 352 0240 FFF7FEFF 		bl	NVIC_Init
 160:App/STM32F4-Discovery/spi.c **** 	// enable the interrupt in the NVIC
 161:App/STM32F4-Discovery/spi.c ****  	NVIC_InitStruct.NVIC_IRQChannel = DMA2_Stream2_IRQn;
 353              		.loc 1 161 0
 354 0244 3A23     		movs	r3, #58
 355 0246 3B73     		strb	r3, [r7, #12]
 162:App/STM32F4-Discovery/spi.c ****   	NVIC_InitStruct.NVIC_IRQChannelPreemptionPriority = 0x1;
 356              		.loc 1 162 0
 357 0248 0123     		movs	r3, #1
 358 024a 7B73     		strb	r3, [r7, #13]
 163:App/STM32F4-Discovery/spi.c ****  	NVIC_InitStruct.NVIC_IRQChannelSubPriority = 0x0;
 359              		.loc 1 163 0
 360 024c 0023     		movs	r3, #0
 361 024e BB73     		strb	r3, [r7, #14]
 164:App/STM32F4-Discovery/spi.c ****   	NVIC_InitStruct.NVIC_IRQChannelCmd = ENABLE;
 362              		.loc 1 164 0
 363 0250 0123     		movs	r3, #1
 364 0252 FB73     		strb	r3, [r7, #15]
 165:App/STM32F4-Discovery/spi.c ****   	NVIC_Init (&NVIC_InitStruct);
 365              		.loc 1 165 0
 366 0254 07F10C03 		add	r3, r7, #12
 367 0258 1846     		mov	r0, r3
 368 025a FFF7FEFF 		bl	NVIC_Init
 166:App/STM32F4-Discovery/spi.c ****   	// Enable dma tx and rx request
 167:App/STM32F4-Discovery/spi.c **** 	SPI_I2S_DMACmd (SPIx, SPI_I2S_DMAReq_Tx, ENABLE);	
 369              		.loc 1 167 0
 370 025e 1E48     		ldr	r0, .L4+4
 371 0260 0221     		movs	r1, #2
 372 0262 0122     		movs	r2, #1
 373 0264 FFF7FEFF 		bl	SPI_I2S_DMACmd
 168:App/STM32F4-Discovery/spi.c **** 	SPI_I2S_DMACmd (SPIx, SPI_I2S_DMAReq_Rx, ENABLE);	
 374              		.loc 1 168 0
 375 0268 1B48     		ldr	r0, .L4+4
 376 026a 0121     		movs	r1, #1
 377 026c 0122     		movs	r2, #1
 378 026e FFF7FEFF 		bl	SPI_I2S_DMACmd
 169:App/STM32F4-Discovery/spi.c **** 	
 170:App/STM32F4-Discovery/spi.c **** 
 171:App/STM32F4-Discovery/spi.c **** 	/* Configure interrupt pin in this case we will use PA0 */
 172:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Pin = GPIO_Pin_0;
 379              		.loc 1 172 0
 380 0272 0123     		movs	r3, #1
 381 0274 3B66     		str	r3, [r7, #96]
 173:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Mode = GPIO_Mode_IN;
 382              		.loc 1 173 0
 383 0276 0023     		movs	r3, #0
 384 0278 87F86430 		strb	r3, [r7, #100]
 174:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_OType = GPIO_OType_PP;
 385              		.loc 1 174 0
 386 027c 0023     		movs	r3, #0
 387 027e 87F86630 		strb	r3, [r7, #102]
 175:App/STM32F4-Discovery/spi.c **** 	GPIO_InitStruct.GPIO_Speed = GPIO_Speed_100MHz;
 388              		.loc 1 175 0
 389 0282 0323     		movs	r3, #3
 390 0284 87F86530 		strb	r3, [r7, #101]
 176:App/STM32F4-Discovery/spi.c **** 	GPIO_Init(GPIOA, &GPIO_InitStruct);	
 391              		.loc 1 176 0
 392 0288 07F16003 		add	r3, r7, #96
 393 028c 1148     		ldr	r0, .L4
 394 028e 1946     		mov	r1, r3
 395 0290 FFF7FEFF 		bl	GPIO_Init
 177:App/STM32F4-Discovery/spi.c **** 	
 178:App/STM32F4-Discovery/spi.c **** 	EXTI_InitTypeDef EXTI_InitStruct;
 179:App/STM32F4-Discovery/spi.c **** 	NVIC_InitTypeDef NVIC_InitStruct1;
 180:App/STM32F4-Discovery/spi.c **** 	/* Connect EXTI Line to appropriate GPIO Pin */ 
 181:App/STM32F4-Discovery/spi.c **** 	SYSCFG_EXTILineConfig(EXTI_PortSourceGPIOA, EXTI_PinSource0);
 396              		.loc 1 181 0
 397 0294 0020     		movs	r0, #0
 398 0296 0021     		movs	r1, #0
 399 0298 FFF7FEFF 		bl	SYSCFG_EXTILineConfig
 182:App/STM32F4-Discovery/spi.c **** 	
 183:App/STM32F4-Discovery/spi.c **** 	/* Configure EXTI Line */
 184:App/STM32F4-Discovery/spi.c **** 	EXTI_InitStruct.EXTI_Line = EXTI_Line0;
 400              		.loc 1 184 0
 401 029c 0123     		movs	r3, #1
 402 029e 7B60     		str	r3, [r7, #4]
 185:App/STM32F4-Discovery/spi.c ****  	EXTI_InitStruct.EXTI_Mode = EXTI_Mode_Interrupt;
 403              		.loc 1 185 0
 404 02a0 0023     		movs	r3, #0
 405 02a2 3B72     		strb	r3, [r7, #8]
 186:App/STM32F4-Discovery/spi.c **** 	EXTI_InitStruct.EXTI_Trigger = EXTI_Trigger_Falling;
 406              		.loc 1 186 0
 407 02a4 0C23     		movs	r3, #12
 408 02a6 7B72     		strb	r3, [r7, #9]
 187:App/STM32F4-Discovery/spi.c **** 	EXTI_InitStruct.EXTI_LineCmd = ENABLE;
 409              		.loc 1 187 0
 410 02a8 0123     		movs	r3, #1
 411 02aa BB72     		strb	r3, [r7, #10]
 188:App/STM32F4-Discovery/spi.c **** 	EXTI_Init(&EXTI_InitStruct);
 412              		.loc 1 188 0
 413 02ac 3B1D     		adds	r3, r7, #4
 414 02ae 1846     		mov	r0, r3
 415 02b0 FFF7FEFF 		bl	EXTI_Init
 189:App/STM32F4-Discovery/spi.c ****  	
 190:App/STM32F4-Discovery/spi.c ****  	/* Enable and set EXTI Line Interrupt */
 191:App/STM32F4-Discovery/spi.c **** 	NVIC_InitStruct1.NVIC_IRQChannel = EXTI0_IRQn;
 416              		.loc 1 191 0
 417 02b4 0623     		movs	r3, #6
 418 02b6 3B70     		strb	r3, [r7]
 192:App/STM32F4-Discovery/spi.c ****  	NVIC_InitStruct1.NVIC_IRQChannelPreemptionPriority = 0x1;
 419              		.loc 1 192 0
 420 02b8 0123     		movs	r3, #1
 421 02ba 7B70     		strb	r3, [r7, #1]
 193:App/STM32F4-Discovery/spi.c **** 	NVIC_InitStruct1.NVIC_IRQChannelSubPriority = 0x0;
 422              		.loc 1 193 0
 423 02bc 0023     		movs	r3, #0
 424 02be BB70     		strb	r3, [r7, #2]
 194:App/STM32F4-Discovery/spi.c ****  	NVIC_InitStruct1.NVIC_IRQChannelCmd = ENABLE;
 425              		.loc 1 194 0
 426 02c0 0123     		movs	r3, #1
 427 02c2 FB70     		strb	r3, [r7, #3]
 195:App/STM32F4-Discovery/spi.c **** 	NVIC_Init(&NVIC_InitStruct1);
 428              		.loc 1 195 0
 429 02c4 3B46     		mov	r3, r7
 430 02c6 1846     		mov	r0, r3
 431 02c8 FFF7FEFF 		bl	NVIC_Init
 196:App/STM32F4-Discovery/spi.c **** 
 197:App/STM32F4-Discovery/spi.c **** 
 198:App/STM32F4-Discovery/spi.c **** 	
 199:App/STM32F4-Discovery/spi.c **** }
 432              		.loc 1 199 0
 433 02cc 6837     		adds	r7, r7, #104
 434 02ce BD46     		mov	sp, r7
 435              		@ sp needed
 436 02d0 80BD     		pop	{r7, pc}
 437              	.L5:
 438 02d2 00BF     		.align	2
 439              	.L4:
 440 02d4 00000240 		.word	1073872896
 441 02d8 00300140 		.word	1073819648
 442 02dc 58640240 		.word	1073898584
 443 02e0 40640240 		.word	1073898560
 444 02e4 0C300140 		.word	1073819660
 445 02e8 00000000 		.word	bufferTX
 446 02ec 00000000 		.word	bufferRX
 447              		.cfi_endproc
 448              	.LFE110:
 450              		.section	.text.DMA2_Stream2_IRQHandler,"ax",%progbits
 451              		.align	2
 452              		.global	DMA2_Stream2_IRQHandler
 453              		.thumb
 454              		.thumb_func
 456              	DMA2_Stream2_IRQHandler:
 457              	.LFB111:
 200:App/STM32F4-Discovery/spi.c **** 
 201:App/STM32F4-Discovery/spi.c **** void DMA2_Stream2_IRQHandler()
 202:App/STM32F4-Discovery/spi.c **** {
 458              		.loc 1 202 0
 459              		.cfi_startproc
 460              		@ args = 0, pretend = 0, frame = 0
 461              		@ frame_needed = 1, uses_anonymous_args = 0
 462 0000 80B5     		push	{r7, lr}
 463              	.LCFI3:
 464              		.cfi_def_cfa_offset 8
 465              		.cfi_offset 7, -8
 466              		.cfi_offset 14, -4
 467 0002 00AF     		add	r7, sp, #0
 468              	.LCFI4:
 469              		.cfi_def_cfa_register 7
 203:App/STM32F4-Discovery/spi.c ****   // Test if DMA Stream Transfer Complete interrupt
 204:App/STM32F4-Discovery/spi.c ****   if (DMA_GetITStatus (SPIx_RX_DMA_STREAM, DMA_IT_TCIF2)) {
 470              		.loc 1 204 0
 471 0004 1B48     		ldr	r0, .L10
 472 0006 1C49     		ldr	r1, .L10+4
 473 0008 FFF7FEFF 		bl	DMA_GetITStatus
 474 000c 0346     		mov	r3, r0
 475 000e 002B     		cmp	r3, #0
 476 0010 27D0     		beq	.L7
 205:App/STM32F4-Discovery/spi.c ****     
 206:App/STM32F4-Discovery/spi.c **** 	DMA_ClearITPendingBit (SPIx_RX_DMA_STREAM, DMA_IT_TCIF2);
 477              		.loc 1 206 0
 478 0012 1848     		ldr	r0, .L10
 479 0014 1849     		ldr	r1, .L10+4
 480 0016 FFF7FEFF 		bl	DMA_ClearITPendingBit
 207:App/STM32F4-Discovery/spi.c **** 	
 208:App/STM32F4-Discovery/spi.c **** 	while (SPI_I2S_GetFlagStatus (SPIx, SPI_I2S_FLAG_BSY) == SET);
 481              		.loc 1 208 0
 482 001a 00BF     		nop
 483              	.L8:
 484              		.loc 1 208 0 is_stmt 0 discriminator 1
 485 001c 1748     		ldr	r0, .L10+8
 486 001e 8021     		movs	r1, #128
 487 0020 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 488 0024 0346     		mov	r3, r0
 489 0026 012B     		cmp	r3, #1
 490 0028 F8D0     		beq	.L8
 209:App/STM32F4-Discovery/spi.c ****     /*
 210:App/STM32F4-Discovery/spi.c ****      * The DMA stream is disabled in hardware at the end of the transfer
 211:App/STM32F4-Discovery/spi.c ****      * Now we can deselect the display. If more than one peripheral was being run
 212:App/STM32F4-Discovery/spi.c ****      * on this SPI peripheral, we would have to do both/all of them, or work out
 213:App/STM32F4-Discovery/spi.c ****      * which one was active and deselect that one.i
 214:App/STM32F4-Discovery/spi.c **** 	
 215:App/STM32F4-Discovery/spi.c ****      */
 216:App/STM32F4-Discovery/spi.c **** 	CSOFF();
 491              		.loc 1 216 0 is_stmt 1
 492 002a 154B     		ldr	r3, .L10+12
 493 002c 144A     		ldr	r2, .L10+12
 494 002e 128B     		ldrh	r2, [r2, #24]	@ movhi
 495 0030 92B2     		uxth	r2, r2
 496 0032 42F01002 		orr	r2, r2, #16
 497 0036 92B2     		uxth	r2, r2
 498 0038 1A83     		strh	r2, [r3, #24]	@ movhi
 217:App/STM32F4-Discovery/spi.c **** 	DMA_Cmd(SPIx_TX_DMA_STREAM, DISABLE);		
 499              		.loc 1 217 0
 500 003a 1248     		ldr	r0, .L10+16
 501 003c 0021     		movs	r1, #0
 502 003e FFF7FEFF 		bl	DMA_Cmd
 218:App/STM32F4-Discovery/spi.c **** 	DMA_Cmd(SPIx_RX_DMA_STREAM, DISABLE);		
 503              		.loc 1 218 0
 504 0042 0C48     		ldr	r0, .L10
 505 0044 0021     		movs	r1, #0
 506 0046 FFF7FEFF 		bl	DMA_Cmd
 219:App/STM32F4-Discovery/spi.c ****  
 220:App/STM32F4-Discovery/spi.c **** 	taskENTER_CRITICAL(); 
 507              		.loc 1 220 0
 508 004a FFF7FEFF 		bl	vPortEnterCritical
 221:App/STM32F4-Discovery/spi.c ****        xSemaphoreGive( xSemaphoreDMASPI);
 509              		.loc 1 221 0
 510 004e 0E4B     		ldr	r3, .L10+20
 511 0050 1B68     		ldr	r3, [r3]
 512 0052 1846     		mov	r0, r3
 513 0054 0021     		movs	r1, #0
 514 0056 0022     		movs	r2, #0
 515 0058 0023     		movs	r3, #0
 516 005a FFF7FEFF 		bl	xQueueGenericSend
 222:App/STM32F4-Discovery/spi.c **** //	xHigherPriorityTaskWoken = pdFalse;
 223:App/STM32F4-Discovery/spi.c **** //	xSemaphoreGiveFromISR( xSemaphoreDMASPI, &xHigherPriorityTaskWoken );
 224:App/STM32F4-Discovery/spi.c **** 	taskEXIT_CRITICAL(); //
 517              		.loc 1 224 0
 518 005e FFF7FEFF 		bl	vPortExitCritical
 519              	.L7:
 225:App/STM32F4-Discovery/spi.c ****   }	
 226:App/STM32F4-Discovery/spi.c **** 
 227:App/STM32F4-Discovery/spi.c ****   portYIELD_FROM_ISR( xHigherPriorityTaskWoken );
 520              		.loc 1 227 0
 521 0062 0A4B     		ldr	r3, .L10+24
 522 0064 1B68     		ldr	r3, [r3]
 523 0066 002B     		cmp	r3, #0
 524 0068 03D0     		beq	.L6
 525              		.loc 1 227 0 is_stmt 0 discriminator 1
 526 006a 094B     		ldr	r3, .L10+28
 527 006c 4FF08052 		mov	r2, #268435456
 528 0070 1A60     		str	r2, [r3]
 529              	.L6:
 228:App/STM32F4-Discovery/spi.c **** }
 530              		.loc 1 228 0 is_stmt 1
 531 0072 80BD     		pop	{r7, pc}
 532              	.L11:
 533              		.align	2
 534              	.L10:
 535 0074 40640240 		.word	1073898560
 536 0078 00802010 		.word	270565376
 537 007c 00300140 		.word	1073819648
 538 0080 00000240 		.word	1073872896
 539 0084 58640240 		.word	1073898584
 540 0088 00000000 		.word	xSemaphoreDMASPI
 541 008c 00000000 		.word	xHigherPriorityTaskWoken
 542 0090 04ED00E0 		.word	-536810236
 543              		.cfi_endproc
 544              	.LFE111:
 546              		.section	.text.DMA2_Stream3_IRQHandler,"ax",%progbits
 547              		.align	2
 548              		.global	DMA2_Stream3_IRQHandler
 549              		.thumb
 550              		.thumb_func
 552              	DMA2_Stream3_IRQHandler:
 553              	.LFB112:
 229:App/STM32F4-Discovery/spi.c **** void DMA2_Stream3_IRQHandler()
 230:App/STM32F4-Discovery/spi.c **** {
 554              		.loc 1 230 0
 555              		.cfi_startproc
 556              		@ args = 0, pretend = 0, frame = 0
 557              		@ frame_needed = 1, uses_anonymous_args = 0
 558 0000 80B5     		push	{r7, lr}
 559              	.LCFI5:
 560              		.cfi_def_cfa_offset 8
 561              		.cfi_offset 7, -8
 562              		.cfi_offset 14, -4
 563 0002 00AF     		add	r7, sp, #0
 564              	.LCFI6:
 565              		.cfi_def_cfa_register 7
 231:App/STM32F4-Discovery/spi.c ****   // Test if DMA Stream Transfer Complete interrupt
 232:App/STM32F4-Discovery/spi.c ****   if (DMA_GetITStatus (SPIx_TX_DMA_STREAM, DMA_IT_TCIF3)) {
 566              		.loc 1 232 0
 567 0004 1B48     		ldr	r0, .L16
 568 0006 1C49     		ldr	r1, .L16+4
 569 0008 FFF7FEFF 		bl	DMA_GetITStatus
 570 000c 0346     		mov	r3, r0
 571 000e 002B     		cmp	r3, #0
 572 0010 27D0     		beq	.L13
 233:App/STM32F4-Discovery/spi.c ****     
 234:App/STM32F4-Discovery/spi.c **** 	DMA_ClearITPendingBit (SPIx_TX_DMA_STREAM, DMA_IT_TCIF3);
 573              		.loc 1 234 0
 574 0012 1848     		ldr	r0, .L16
 575 0014 1849     		ldr	r1, .L16+4
 576 0016 FFF7FEFF 		bl	DMA_ClearITPendingBit
 235:App/STM32F4-Discovery/spi.c **** 	
 236:App/STM32F4-Discovery/spi.c **** 	while (SPI_I2S_GetFlagStatus (SPIx, SPI_I2S_FLAG_BSY) == SET);
 577              		.loc 1 236 0
 578 001a 00BF     		nop
 579              	.L14:
 580              		.loc 1 236 0 is_stmt 0 discriminator 1
 581 001c 1748     		ldr	r0, .L16+8
 582 001e 8021     		movs	r1, #128
 583 0020 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 584 0024 0346     		mov	r3, r0
 585 0026 012B     		cmp	r3, #1
 586 0028 F8D0     		beq	.L14
 237:App/STM32F4-Discovery/spi.c ****     /*
 238:App/STM32F4-Discovery/spi.c ****      * The DMA stream is disabled in hardware at the end of the transfer
 239:App/STM32F4-Discovery/spi.c ****      * Now we can deselect the display. If more than one peripheral was being run
 240:App/STM32F4-Discovery/spi.c ****      * on this SPI peripheral, we would have to do both/all of them, or work out
 241:App/STM32F4-Discovery/spi.c ****      * which one was active and deselect that one.i
 242:App/STM32F4-Discovery/spi.c **** 	
 243:App/STM32F4-Discovery/spi.c ****      */
 244:App/STM32F4-Discovery/spi.c **** 	CSOFF();
 587              		.loc 1 244 0 is_stmt 1
 588 002a 154B     		ldr	r3, .L16+12
 589 002c 144A     		ldr	r2, .L16+12
 590 002e 128B     		ldrh	r2, [r2, #24]	@ movhi
 591 0030 92B2     		uxth	r2, r2
 592 0032 42F01002 		orr	r2, r2, #16
 593 0036 92B2     		uxth	r2, r2
 594 0038 1A83     		strh	r2, [r3, #24]	@ movhi
 245:App/STM32F4-Discovery/spi.c **** 	DMA_Cmd(SPIx_TX_DMA_STREAM, DISABLE);		
 595              		.loc 1 245 0
 596 003a 0E48     		ldr	r0, .L16
 597 003c 0021     		movs	r1, #0
 598 003e FFF7FEFF 		bl	DMA_Cmd
 246:App/STM32F4-Discovery/spi.c **** 	DMA_Cmd(SPIx_RX_DMA_STREAM, DISABLE);		
 599              		.loc 1 246 0
 600 0042 1048     		ldr	r0, .L16+16
 601 0044 0021     		movs	r1, #0
 602 0046 FFF7FEFF 		bl	DMA_Cmd
 247:App/STM32F4-Discovery/spi.c ****        
 248:App/STM32F4-Discovery/spi.c **** 	taskENTER_CRITICAL(); 
 603              		.loc 1 248 0
 604 004a FFF7FEFF 		bl	vPortEnterCritical
 249:App/STM32F4-Discovery/spi.c **** 	 xSemaphoreGive( xSemaphoreDMASPI );
 605              		.loc 1 249 0
 606 004e 0E4B     		ldr	r3, .L16+20
 607 0050 1B68     		ldr	r3, [r3]
 608 0052 1846     		mov	r0, r3
 609 0054 0021     		movs	r1, #0
 610 0056 0022     		movs	r2, #0
 611 0058 0023     		movs	r3, #0
 612 005a FFF7FEFF 		bl	xQueueGenericSend
 250:App/STM32F4-Discovery/spi.c **** //	xHigherPriorityTaskWoken = pdFalse;
 251:App/STM32F4-Discovery/spi.c **** //	xSemaphoreGiveFromISR( xSemaphoreDMASPI, &xHigherPriorityTaskWoken );
 252:App/STM32F4-Discovery/spi.c ****  	taskEXIT_CRITICAL();  
 613              		.loc 1 252 0
 614 005e FFF7FEFF 		bl	vPortExitCritical
 615              	.L13:
 253:App/STM32F4-Discovery/spi.c ****  }
 254:App/STM32F4-Discovery/spi.c ****   portYIELD_FROM_ISR( xHigherPriorityTaskWoken );
 616              		.loc 1 254 0
 617 0062 0A4B     		ldr	r3, .L16+24
 618 0064 1B68     		ldr	r3, [r3]
 619 0066 002B     		cmp	r3, #0
 620 0068 03D0     		beq	.L12
 621              		.loc 1 254 0 is_stmt 0 discriminator 1
 622 006a 094B     		ldr	r3, .L16+28
 623 006c 4FF08052 		mov	r2, #268435456
 624 0070 1A60     		str	r2, [r3]
 625              	.L12:
 255:App/STM32F4-Discovery/spi.c **** }
 626              		.loc 1 255 0 is_stmt 1
 627 0072 80BD     		pop	{r7, pc}
 628              	.L17:
 629              		.align	2
 630              	.L16:
 631 0074 58640240 		.word	1073898584
 632 0078 00800018 		.word	402685952
 633 007c 00300140 		.word	1073819648
 634 0080 00000240 		.word	1073872896
 635 0084 40640240 		.word	1073898560
 636 0088 00000000 		.word	xSemaphoreDMASPI
 637 008c 00000000 		.word	xHigherPriorityTaskWoken
 638 0090 04ED00E0 		.word	-536810236
 639              		.cfi_endproc
 640              	.LFE112:
 642              		.section	.text.SPI1_send,"ax",%progbits
 643              		.align	2
 644              		.global	SPI1_send
 645              		.thumb
 646              		.thumb_func
 648              	SPI1_send:
 649              	.LFB113:
 256:App/STM32F4-Discovery/spi.c **** 
 257:App/STM32F4-Discovery/spi.c **** 
 258:App/STM32F4-Discovery/spi.c **** /* This funtion is used to transmit and/ receive data 
 259:App/STM32F4-Discovery/spi.c ****  * with SPI1
 260:App/STM32F4-Discovery/spi.c ****  * 			data --> data to be transmitted
 261:App/STM32F4-Discovery/spi.c ****  * 			returns received value
 262:App/STM32F4-Discovery/spi.c **** 
 263:App/STM32F4-Discovery/spi.c **** */
 264:App/STM32F4-Discovery/spi.c **** uint8_t SPI1_send(uint8_t data){
 650              		.loc 1 264 0
 651              		.cfi_startproc
 652              		@ args = 0, pretend = 0, frame = 16
 653              		@ frame_needed = 1, uses_anonymous_args = 0
 654 0000 80B5     		push	{r7, lr}
 655              	.LCFI7:
 656              		.cfi_def_cfa_offset 8
 657              		.cfi_offset 7, -8
 658              		.cfi_offset 14, -4
 659 0002 84B0     		sub	sp, sp, #16
 660              	.LCFI8:
 661              		.cfi_def_cfa_offset 24
 662 0004 00AF     		add	r7, sp, #0
 663              	.LCFI9:
 664              		.cfi_def_cfa_register 7
 665 0006 0346     		mov	r3, r0
 666 0008 FB71     		strb	r3, [r7, #7]
 265:App/STM32F4-Discovery/spi.c **** 
 266:App/STM32F4-Discovery/spi.c **** 	
 267:App/STM32F4-Discovery/spi.c **** 	while(!SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_TXE)); 
 667              		.loc 1 267 0
 668 000a 00BF     		nop
 669              	.L19:
 670              		.loc 1 267 0 is_stmt 0 discriminator 1
 671 000c 0F48     		ldr	r0, .L22
 672 000e 0221     		movs	r1, #2
 673 0010 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 674 0014 0346     		mov	r3, r0
 675 0016 002B     		cmp	r3, #0
 676 0018 F8D0     		beq	.L19
 268:App/STM32F4-Discovery/spi.c **** 	SPI_I2S_SendData(SPI1, data);
 677              		.loc 1 268 0 is_stmt 1
 678 001a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 679 001c 9BB2     		uxth	r3, r3
 680 001e 0B48     		ldr	r0, .L22
 681 0020 1946     		mov	r1, r3
 682 0022 FFF7FEFF 		bl	SPI_I2S_SendData
 269:App/STM32F4-Discovery/spi.c **** 	
 270:App/STM32F4-Discovery/spi.c **** 	while(!SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_RXNE));
 683              		.loc 1 270 0
 684 0026 00BF     		nop
 685              	.L20:
 686              		.loc 1 270 0 is_stmt 0 discriminator 1
 687 0028 0848     		ldr	r0, .L22
 688 002a 0121     		movs	r1, #1
 689 002c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 690 0030 0346     		mov	r3, r0
 691 0032 002B     		cmp	r3, #0
 692 0034 F8D0     		beq	.L20
 271:App/STM32F4-Discovery/spi.c **** 	uint8_t d = SPI_I2S_ReceiveData(SPI1);
 693              		.loc 1 271 0 is_stmt 1
 694 0036 0548     		ldr	r0, .L22
 695 0038 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 696 003c 0346     		mov	r3, r0
 697 003e FB73     		strb	r3, [r7, #15]
 272:App/STM32F4-Discovery/spi.c **** 	return d;
 698              		.loc 1 272 0
 699 0040 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 273:App/STM32F4-Discovery/spi.c ****  	
 274:App/STM32F4-Discovery/spi.c **** }
 700              		.loc 1 274 0
 701 0042 1846     		mov	r0, r3
 702 0044 1037     		adds	r7, r7, #16
 703 0046 BD46     		mov	sp, r7
 704              		@ sp needed
 705 0048 80BD     		pop	{r7, pc}
 706              	.L23:
 707 004a 00BF     		.align	2
 708              	.L22:
 709 004c 00300140 		.word	1073819648
 710              		.cfi_endproc
 711              	.LFE113:
 713              		.section	.text.SPI1_recive,"ax",%progbits
 714              		.align	2
 715              		.global	SPI1_recive
 716              		.thumb
 717              		.thumb_func
 719              	SPI1_recive:
 720              	.LFB114:
 275:App/STM32F4-Discovery/spi.c **** 
 276:App/STM32F4-Discovery/spi.c **** uint8_t SPI1_recive(void)
 277:App/STM32F4-Discovery/spi.c **** {
 721              		.loc 1 277 0
 722              		.cfi_startproc
 723              		@ args = 0, pretend = 0, frame = 0
 724              		@ frame_needed = 1, uses_anonymous_args = 0
 725 0000 80B5     		push	{r7, lr}
 726              	.LCFI10:
 727              		.cfi_def_cfa_offset 8
 728              		.cfi_offset 7, -8
 729              		.cfi_offset 14, -4
 730 0002 00AF     		add	r7, sp, #0
 731              	.LCFI11:
 732              		.cfi_def_cfa_register 7
 278:App/STM32F4-Discovery/spi.c **** 
 279:App/STM32F4-Discovery/spi.c **** 	while(!SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_TXE)); 
 733              		.loc 1 279 0
 734 0004 00BF     		nop
 735              	.L25:
 736              		.loc 1 279 0 is_stmt 0 discriminator 1
 737 0006 0D48     		ldr	r0, .L28
 738 0008 0221     		movs	r1, #2
 739 000a FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 740 000e 0346     		mov	r3, r0
 741 0010 002B     		cmp	r3, #0
 742 0012 F8D0     		beq	.L25
 280:App/STM32F4-Discovery/spi.c **** 	SPI_I2S_SendData(SPI1,0x0 );
 743              		.loc 1 280 0 is_stmt 1
 744 0014 0948     		ldr	r0, .L28
 745 0016 0021     		movs	r1, #0
 746 0018 FFF7FEFF 		bl	SPI_I2S_SendData
 281:App/STM32F4-Discovery/spi.c **** 	
 282:App/STM32F4-Discovery/spi.c **** 	while(!SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_RXNE));
 747              		.loc 1 282 0
 748 001c 00BF     		nop
 749              	.L26:
 750              		.loc 1 282 0 is_stmt 0 discriminator 1
 751 001e 0748     		ldr	r0, .L28
 752 0020 0121     		movs	r1, #1
 753 0022 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 754 0026 0346     		mov	r3, r0
 755 0028 002B     		cmp	r3, #0
 756 002a F8D0     		beq	.L26
 283:App/STM32F4-Discovery/spi.c **** 	return SPI_I2S_ReceiveData(SPI1);
 757              		.loc 1 283 0 is_stmt 1
 758 002c 0348     		ldr	r0, .L28
 759 002e FFF7FEFF 		bl	SPI_I2S_ReceiveData
 760 0032 0346     		mov	r3, r0
 761 0034 DBB2     		uxtb	r3, r3
 284:App/STM32F4-Discovery/spi.c **** 	
 285:App/STM32F4-Discovery/spi.c **** }
 762              		.loc 1 285 0
 763 0036 1846     		mov	r0, r3
 764 0038 80BD     		pop	{r7, pc}
 765              	.L29:
 766 003a 00BF     		.align	2
 767              	.L28:
 768 003c 00300140 		.word	1073819648
 769              		.cfi_endproc
 770              	.LFE114:
 772              		.section	.text.spi_dma_send,"ax",%progbits
 773              		.align	2
 774              		.global	spi_dma_send
 775              		.thumb
 776              		.thumb_func
 778              	spi_dma_send:
 779              	.LFB115:
 286:App/STM32F4-Discovery/spi.c **** 
 287:App/STM32F4-Discovery/spi.c **** 
 288:App/STM32F4-Discovery/spi.c **** /*---------------------------- Matic Knap 25 Jun 2014 ---------------------*/
 289:App/STM32F4-Discovery/spi.c **** 
 290:App/STM32F4-Discovery/spi.c **** void spi_dma_send(uint16_t address, uint16_t data_len, uint8_t *data_buf)
 291:App/STM32F4-Discovery/spi.c **** {
 780              		.loc 1 291 0
 781              		.cfi_startproc
 782              		@ args = 0, pretend = 0, frame = 24
 783              		@ frame_needed = 1, uses_anonymous_args = 0
 784 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 785              	.LCFI12:
 786              		.cfi_def_cfa_offset 28
 787              		.cfi_offset 4, -28
 788              		.cfi_offset 5, -24
 789              		.cfi_offset 6, -20
 790              		.cfi_offset 7, -16
 791              		.cfi_offset 8, -12
 792              		.cfi_offset 9, -8
 793              		.cfi_offset 14, -4
 794 0004 87B0     		sub	sp, sp, #28
 795              	.LCFI13:
 796              		.cfi_def_cfa_offset 56
 797 0006 00AF     		add	r7, sp, #0
 798              	.LCFI14:
 799              		.cfi_def_cfa_register 7
 800 0008 0B46     		mov	r3, r1
 801 000a 3A60     		str	r2, [r7]
 802 000c 0246     		mov	r2, r0	@ movhi
 803 000e FA80     		strh	r2, [r7, #6]	@ movhi
 804 0010 BB80     		strh	r3, [r7, #4]	@ movhi
 805 0012 6B46     		mov	r3, sp
 806 0014 1E46     		mov	r6, r3
 292:App/STM32F4-Discovery/spi.c **** 		uint8_t buffer[data_len+4];
 807              		.loc 1 292 0
 808 0016 BB88     		ldrh	r3, [r7, #4]
 809 0018 191D     		adds	r1, r3, #4
 810 001a 4B1E     		subs	r3, r1, #1
 811 001c 3B61     		str	r3, [r7, #16]
 812 001e 0B46     		mov	r3, r1
 813 0020 1A46     		mov	r2, r3
 814 0022 4FF00003 		mov	r3, #0
 815 0026 4FEAC309 		lsl	r9, r3, #3
 816 002a 49EA5279 		orr	r9, r9, r2, lsr #29
 817 002e 4FEAC208 		lsl	r8, r2, #3
 818 0032 0B46     		mov	r3, r1
 819 0034 1A46     		mov	r2, r3
 820 0036 4FF00003 		mov	r3, #0
 821 003a DD00     		lsls	r5, r3, #3
 822 003c 45EA5275 		orr	r5, r5, r2, lsr #29
 823 0040 D400     		lsls	r4, r2, #3
 824 0042 0B46     		mov	r3, r1
 825 0044 0733     		adds	r3, r3, #7
 826 0046 DB08     		lsrs	r3, r3, #3
 827 0048 DB00     		lsls	r3, r3, #3
 828 004a ADEB030D 		sub	sp, sp, r3
 829 004e 6B46     		mov	r3, sp
 830 0050 0033     		adds	r3, r3, #0
 831 0052 FB60     		str	r3, [r7, #12]
 293:App/STM32F4-Discovery/spi.c **** 		buffer[0] = ((address & 0xff00) >> 8); // addres byte 1 
 832              		.loc 1 293 0
 833 0054 FB88     		ldrh	r3, [r7, #6]
 834 0056 1B0A     		lsrs	r3, r3, #8
 835 0058 9BB2     		uxth	r3, r3
 836 005a DAB2     		uxtb	r2, r3
 837 005c FB68     		ldr	r3, [r7, #12]
 838 005e 1A70     		strb	r2, [r3]
 294:App/STM32F4-Discovery/spi.c **** 		buffer[1] = ((address & 0x00ff)); //address byte 2 
 839              		.loc 1 294 0
 840 0060 FB88     		ldrh	r3, [r7, #6]	@ movhi
 841 0062 DAB2     		uxtb	r2, r3
 842 0064 FB68     		ldr	r3, [r7, #12]
 843 0066 5A70     		strb	r2, [r3, #1]
 295:App/STM32F4-Discovery/spi.c **** 		buffer[2] = ((0x80 | (data_len & 0x7f00) >> 8 ));
 844              		.loc 1 295 0
 845 0068 BB88     		ldrh	r3, [r7, #4]
 846 006a 03F4FE43 		and	r3, r3, #32512
 847 006e 1B12     		asrs	r3, r3, #8
 848 0070 DBB2     		uxtb	r3, r3
 849 0072 63F07F03 		orn	r3, r3, #127
 850 0076 DBB2     		uxtb	r3, r3
 851 0078 DAB2     		uxtb	r2, r3
 852 007a FB68     		ldr	r3, [r7, #12]
 853 007c 9A70     		strb	r2, [r3, #2]
 296:App/STM32F4-Discovery/spi.c **** 		buffer[3] = (data_len & 0x00ff);
 854              		.loc 1 296 0
 855 007e BB88     		ldrh	r3, [r7, #4]	@ movhi
 856 0080 DAB2     		uxtb	r2, r3
 857 0082 FB68     		ldr	r3, [r7, #12]
 858 0084 DA70     		strb	r2, [r3, #3]
 297:App/STM32F4-Discovery/spi.c **** 
 298:App/STM32F4-Discovery/spi.c **** 		int i;
 299:App/STM32F4-Discovery/spi.c **** 		for (i = 4 ; i < data_len+4; i++) 
 859              		.loc 1 299 0
 860 0086 0423     		movs	r3, #4
 861 0088 7B61     		str	r3, [r7, #20]
 862 008a 0BE0     		b	.L31
 863              	.L32:
 300:App/STM32F4-Discovery/spi.c **** 			buffer[i] = (data_buf[i-4]);
 864              		.loc 1 300 0 discriminator 2
 865 008c 7B69     		ldr	r3, [r7, #20]
 866 008e 043B     		subs	r3, r3, #4
 867 0090 3A68     		ldr	r2, [r7]
 868 0092 1344     		add	r3, r3, r2
 869 0094 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 870 0096 F968     		ldr	r1, [r7, #12]
 871 0098 7B69     		ldr	r3, [r7, #20]
 872 009a 0B44     		add	r3, r3, r1
 873 009c 1A70     		strb	r2, [r3]
 299:App/STM32F4-Discovery/spi.c **** 		for (i = 4 ; i < data_len+4; i++) 
 874              		.loc 1 299 0 discriminator 2
 875 009e 7B69     		ldr	r3, [r7, #20]
 876 00a0 0133     		adds	r3, r3, #1
 877 00a2 7B61     		str	r3, [r7, #20]
 878              	.L31:
 299:App/STM32F4-Discovery/spi.c **** 		for (i = 4 ; i < data_len+4; i++) 
 879              		.loc 1 299 0 is_stmt 0 discriminator 1
 880 00a4 BB88     		ldrh	r3, [r7, #4]
 881 00a6 1A1D     		adds	r2, r3, #4
 882 00a8 7B69     		ldr	r3, [r7, #20]
 883 00aa 9A42     		cmp	r2, r3
 884 00ac EEDC     		bgt	.L32
 301:App/STM32F4-Discovery/spi.c **** 		DMA_SetCurrDataCounter(SPIx_TX_DMA_STREAM, data_len + 4);
 885              		.loc 1 301 0 is_stmt 1
 886 00ae BB88     		ldrh	r3, [r7, #4]	@ movhi
 887 00b0 0433     		adds	r3, r3, #4
 888 00b2 9BB2     		uxth	r3, r3
 889 00b4 1248     		ldr	r0, .L33
 890 00b6 1946     		mov	r1, r3
 891 00b8 FFF7FEFF 		bl	DMA_SetCurrDataCounter
 302:App/STM32F4-Discovery/spi.c **** 		SPIx_TX_DMA_STREAM->M0AR =(uint32_t) &buffer;	
 892              		.loc 1 302 0
 893 00bc 104B     		ldr	r3, .L33
 894 00be FA68     		ldr	r2, [r7, #12]
 895 00c0 DA60     		str	r2, [r3, #12]
 303:App/STM32F4-Discovery/spi.c **** 		CSON(); // chip select 
 896              		.loc 1 303 0
 897 00c2 104B     		ldr	r3, .L33+4
 898 00c4 0F4A     		ldr	r2, .L33+4
 899 00c6 528B     		ldrh	r2, [r2, #26]	@ movhi
 900 00c8 92B2     		uxth	r2, r2
 901 00ca 42F01002 		orr	r2, r2, #16
 902 00ce 92B2     		uxth	r2, r2
 903 00d0 5A83     		strh	r2, [r3, #26]	@ movhi
 304:App/STM32F4-Discovery/spi.c **** 		DMA_Cmd(SPIx_TX_DMA_STREAM, ENABLE);		
 904              		.loc 1 304 0
 905 00d2 0B48     		ldr	r0, .L33
 906 00d4 0121     		movs	r1, #1
 907 00d6 FFF7FEFF 		bl	DMA_Cmd
 305:App/STM32F4-Discovery/spi.c **** 		DMA_Cmd(SPIx_RX_DMA_STREAM, ENABLE);	
 908              		.loc 1 305 0
 909 00da 0B48     		ldr	r0, .L33+8
 910 00dc 0121     		movs	r1, #1
 911 00de FFF7FEFF 		bl	DMA_Cmd
 306:App/STM32F4-Discovery/spi.c **** 		/* Block until the semaphore is given */
 307:App/STM32F4-Discovery/spi.c ****         	 xSemaphoreTake(xSemaphoreDMASPI, portMAX_DELAY);
 912              		.loc 1 307 0
 913 00e2 0A4B     		ldr	r3, .L33+12
 914 00e4 1B68     		ldr	r3, [r3]
 915 00e6 1846     		mov	r0, r3
 916 00e8 0021     		movs	r1, #0
 917 00ea 4FF0FF32 		mov	r2, #-1
 918 00ee 0023     		movs	r3, #0
 919 00f0 FFF7FEFF 		bl	xQueueGenericReceive
 920 00f4 B546     		mov	sp, r6
 308:App/STM32F4-Discovery/spi.c **** 
 309:App/STM32F4-Discovery/spi.c **** 	//	CSOFF(); // chip deselect 
 310:App/STM32F4-Discovery/spi.c **** 			
 311:App/STM32F4-Discovery/spi.c **** 	
 312:App/STM32F4-Discovery/spi.c **** }
 921              		.loc 1 312 0
 922 00f6 1C37     		adds	r7, r7, #28
 923 00f8 BD46     		mov	sp, r7
 924              		@ sp needed
 925 00fa BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 926              	.L34:
 927 00fe 00BF     		.align	2
 928              	.L33:
 929 0100 58640240 		.word	1073898584
 930 0104 00000240 		.word	1073872896
 931 0108 40640240 		.word	1073898560
 932 010c 00000000 		.word	xSemaphoreDMASPI
 933              		.cfi_endproc
 934              	.LFE115:
 936              		.section	.text.spi_dma_send2B,"ax",%progbits
 937              		.align	2
 938              		.global	spi_dma_send2B
 939              		.thumb
 940              		.thumb_func
 942              	spi_dma_send2B:
 943              	.LFB116:
 313:App/STM32F4-Discovery/spi.c **** 
 314:App/STM32F4-Discovery/spi.c **** void spi_dma_send2B(uint16_t address,  uint16_t data_buf)
 315:App/STM32F4-Discovery/spi.c **** {
 944              		.loc 1 315 0
 945              		.cfi_startproc
 946              		@ args = 0, pretend = 0, frame = 16
 947              		@ frame_needed = 1, uses_anonymous_args = 0
 948 0000 80B5     		push	{r7, lr}
 949              	.LCFI15:
 950              		.cfi_def_cfa_offset 8
 951              		.cfi_offset 7, -8
 952              		.cfi_offset 14, -4
 953 0002 84B0     		sub	sp, sp, #16
 954              	.LCFI16:
 955              		.cfi_def_cfa_offset 24
 956 0004 00AF     		add	r7, sp, #0
 957              	.LCFI17:
 958              		.cfi_def_cfa_register 7
 959 0006 0246     		mov	r2, r0
 960 0008 0B46     		mov	r3, r1
 961 000a FA80     		strh	r2, [r7, #6]	@ movhi
 962 000c BB80     		strh	r3, [r7, #4]	@ movhi
 316:App/STM32F4-Discovery/spi.c **** 	uint8_t buffer[6];
 317:App/STM32F4-Discovery/spi.c **** 	uint16_t data_len = 2;
 963              		.loc 1 317 0
 964 000e 0223     		movs	r3, #2
 965 0010 FB81     		strh	r3, [r7, #14]	@ movhi
 318:App/STM32F4-Discovery/spi.c **** 	buffer[0] = ((address & 0xff00) >> 8); // addres byte 1 
 966              		.loc 1 318 0
 967 0012 FB88     		ldrh	r3, [r7, #6]
 968 0014 1B0A     		lsrs	r3, r3, #8
 969 0016 9BB2     		uxth	r3, r3
 970 0018 DBB2     		uxtb	r3, r3
 971 001a 3B72     		strb	r3, [r7, #8]
 319:App/STM32F4-Discovery/spi.c **** 	buffer[1] = ((address & 0x00ff)); //address byte 2 
 972              		.loc 1 319 0
 973 001c FB88     		ldrh	r3, [r7, #6]	@ movhi
 974 001e DBB2     		uxtb	r3, r3
 975 0020 7B72     		strb	r3, [r7, #9]
 320:App/STM32F4-Discovery/spi.c **** 	buffer[2] = ((0x80 | (data_len & 0x7f00) >> 8 ));
 976              		.loc 1 320 0
 977 0022 FB89     		ldrh	r3, [r7, #14]
 978 0024 03F4FE43 		and	r3, r3, #32512
 979 0028 1B12     		asrs	r3, r3, #8
 980 002a DBB2     		uxtb	r3, r3
 981 002c 63F07F03 		orn	r3, r3, #127
 982 0030 DBB2     		uxtb	r3, r3
 983 0032 DBB2     		uxtb	r3, r3
 984 0034 BB72     		strb	r3, [r7, #10]
 321:App/STM32F4-Discovery/spi.c **** 	 buffer[3] = (data_len & 0x00ff);
 985              		.loc 1 321 0
 986 0036 FB89     		ldrh	r3, [r7, #14]	@ movhi
 987 0038 DBB2     		uxtb	r3, r3
 988 003a FB72     		strb	r3, [r7, #11]
 322:App/STM32F4-Discovery/spi.c **** 	 buffer[4] = ((data_buf & 0xff00) >> 8);
 989              		.loc 1 322 0
 990 003c BB88     		ldrh	r3, [r7, #4]
 991 003e 1B0A     		lsrs	r3, r3, #8
 992 0040 9BB2     		uxth	r3, r3
 993 0042 DBB2     		uxtb	r3, r3
 994 0044 3B73     		strb	r3, [r7, #12]
 323:App/STM32F4-Discovery/spi.c **** 	 buffer[5] = (data_buf & 0x00ff);
 995              		.loc 1 323 0
 996 0046 BB88     		ldrh	r3, [r7, #4]	@ movhi
 997 0048 DBB2     		uxtb	r3, r3
 998 004a 7B73     		strb	r3, [r7, #13]
 324:App/STM32F4-Discovery/spi.c **** 	DMA_SetCurrDataCounter(SPIx_TX_DMA_STREAM, 6);
 999              		.loc 1 324 0
 1000 004c 1148     		ldr	r0, .L36
 1001 004e 0621     		movs	r1, #6
 1002 0050 FFF7FEFF 		bl	DMA_SetCurrDataCounter
 325:App/STM32F4-Discovery/spi.c **** 	SPIx_TX_DMA_STREAM->M0AR =(uint32_t) &buffer;	
 1003              		.loc 1 325 0
 1004 0054 0F4B     		ldr	r3, .L36
 1005 0056 07F10802 		add	r2, r7, #8
 1006 005a DA60     		str	r2, [r3, #12]
 326:App/STM32F4-Discovery/spi.c **** 	CSON(); // chip select 
 1007              		.loc 1 326 0
 1008 005c 0E4B     		ldr	r3, .L36+4
 1009 005e 0E4A     		ldr	r2, .L36+4
 1010 0060 528B     		ldrh	r2, [r2, #26]	@ movhi
 1011 0062 92B2     		uxth	r2, r2
 1012 0064 42F01002 		orr	r2, r2, #16
 1013 0068 92B2     		uxth	r2, r2
 1014 006a 5A83     		strh	r2, [r3, #26]	@ movhi
 327:App/STM32F4-Discovery/spi.c **** 	DMA_Cmd(SPIx_TX_DMA_STREAM, ENABLE);		
 1015              		.loc 1 327 0
 1016 006c 0948     		ldr	r0, .L36
 1017 006e 0121     		movs	r1, #1
 1018 0070 FFF7FEFF 		bl	DMA_Cmd
 328:App/STM32F4-Discovery/spi.c **** 	DMA_Cmd(SPIx_RX_DMA_STREAM, ENABLE);	
 1019              		.loc 1 328 0
 1020 0074 0948     		ldr	r0, .L36+8
 1021 0076 0121     		movs	r1, #1
 1022 0078 FFF7FEFF 		bl	DMA_Cmd
 329:App/STM32F4-Discovery/spi.c **** 	/* Block until the semaphore is given */
 330:App/STM32F4-Discovery/spi.c ****         xSemaphoreTake(xSemaphoreDMASPI, portMAX_DELAY);	
 1023              		.loc 1 330 0
 1024 007c 084B     		ldr	r3, .L36+12
 1025 007e 1B68     		ldr	r3, [r3]
 1026 0080 1846     		mov	r0, r3
 1027 0082 0021     		movs	r1, #0
 1028 0084 4FF0FF32 		mov	r2, #-1
 1029 0088 0023     		movs	r3, #0
 1030 008a FFF7FEFF 		bl	xQueueGenericReceive
 331:App/STM32F4-Discovery/spi.c **** 	
 332:App/STM32F4-Discovery/spi.c **** //	CSOFF(); // chip deselect 
 333:App/STM32F4-Discovery/spi.c **** 			
 334:App/STM32F4-Discovery/spi.c **** }
 1031              		.loc 1 334 0
 1032 008e 1037     		adds	r7, r7, #16
 1033 0090 BD46     		mov	sp, r7
 1034              		@ sp needed
 1035 0092 80BD     		pop	{r7, pc}
 1036              	.L37:
 1037              		.align	2
 1038              	.L36:
 1039 0094 58640240 		.word	1073898584
 1040 0098 00000240 		.word	1073872896
 1041 009c 40640240 		.word	1073898560
 1042 00a0 00000000 		.word	xSemaphoreDMASPI
 1043              		.cfi_endproc
 1044              	.LFE116:
 1046              		.section	.text.spi_dma_sendByte,"ax",%progbits
 1047              		.align	2
 1048              		.global	spi_dma_sendByte
 1049              		.thumb
 1050              		.thumb_func
 1052              	spi_dma_sendByte:
 1053              	.LFB117:
 335:App/STM32F4-Discovery/spi.c **** 
 336:App/STM32F4-Discovery/spi.c **** void spi_dma_sendByte(uint16_t address,  uint8_t data_buf)
 337:App/STM32F4-Discovery/spi.c **** {
 1054              		.loc 1 337 0
 1055              		.cfi_startproc
 1056              		@ args = 0, pretend = 0, frame = 16
 1057              		@ frame_needed = 1, uses_anonymous_args = 0
 1058 0000 80B5     		push	{r7, lr}
 1059              	.LCFI18:
 1060              		.cfi_def_cfa_offset 8
 1061              		.cfi_offset 7, -8
 1062              		.cfi_offset 14, -4
 1063 0002 84B0     		sub	sp, sp, #16
 1064              	.LCFI19:
 1065              		.cfi_def_cfa_offset 24
 1066 0004 00AF     		add	r7, sp, #0
 1067              	.LCFI20:
 1068              		.cfi_def_cfa_register 7
 1069 0006 0246     		mov	r2, r0
 1070 0008 0B46     		mov	r3, r1
 1071 000a FA80     		strh	r2, [r7, #6]	@ movhi
 1072 000c 7B71     		strb	r3, [r7, #5]
 338:App/STM32F4-Discovery/spi.c **** 		uint8_t buffer[5];
 339:App/STM32F4-Discovery/spi.c **** 		uint16_t data_len=0x1;
 1073              		.loc 1 339 0
 1074 000e 0123     		movs	r3, #1
 1075 0010 FB81     		strh	r3, [r7, #14]	@ movhi
 340:App/STM32F4-Discovery/spi.c **** 		buffer[0] = ((address & 0xff00) >> 8); // addres byte 1 
 1076              		.loc 1 340 0
 1077 0012 FB88     		ldrh	r3, [r7, #6]
 1078 0014 1B0A     		lsrs	r3, r3, #8
 1079 0016 9BB2     		uxth	r3, r3
 1080 0018 DBB2     		uxtb	r3, r3
 1081 001a 3B72     		strb	r3, [r7, #8]
 341:App/STM32F4-Discovery/spi.c **** 		buffer[1] = ((address & 0x00ff)); //address byte 2 
 1082              		.loc 1 341 0
 1083 001c FB88     		ldrh	r3, [r7, #6]	@ movhi
 1084 001e DBB2     		uxtb	r3, r3
 1085 0020 7B72     		strb	r3, [r7, #9]
 342:App/STM32F4-Discovery/spi.c **** 		buffer[2] = ((0x80 | (data_len & 0x7f00) >> 8 ));
 1086              		.loc 1 342 0
 1087 0022 FB89     		ldrh	r3, [r7, #14]
 1088 0024 03F4FE43 		and	r3, r3, #32512
 1089 0028 1B12     		asrs	r3, r3, #8
 1090 002a DBB2     		uxtb	r3, r3
 1091 002c 63F07F03 		orn	r3, r3, #127
 1092 0030 DBB2     		uxtb	r3, r3
 1093 0032 DBB2     		uxtb	r3, r3
 1094 0034 BB72     		strb	r3, [r7, #10]
 343:App/STM32F4-Discovery/spi.c **** 		buffer[3] = (data_len & 0x00ff);
 1095              		.loc 1 343 0
 1096 0036 FB89     		ldrh	r3, [r7, #14]	@ movhi
 1097 0038 DBB2     		uxtb	r3, r3
 1098 003a FB72     		strb	r3, [r7, #11]
 344:App/STM32F4-Discovery/spi.c **** 		buffer[4] = data_buf ; 
 1099              		.loc 1 344 0
 1100 003c 7B79     		ldrb	r3, [r7, #5]
 1101 003e 3B73     		strb	r3, [r7, #12]
 345:App/STM32F4-Discovery/spi.c **** 		DMA_SetCurrDataCounter(SPIx_TX_DMA_STREAM, 5);
 1102              		.loc 1 345 0
 1103 0040 1148     		ldr	r0, .L39
 1104 0042 0521     		movs	r1, #5
 1105 0044 FFF7FEFF 		bl	DMA_SetCurrDataCounter
 346:App/STM32F4-Discovery/spi.c **** 		SPIx_TX_DMA_STREAM->M0AR =(uint32_t) &buffer;	
 1106              		.loc 1 346 0
 1107 0048 0F4B     		ldr	r3, .L39
 1108 004a 07F10802 		add	r2, r7, #8
 1109 004e DA60     		str	r2, [r3, #12]
 347:App/STM32F4-Discovery/spi.c **** 		CSON(); // chip select 
 1110              		.loc 1 347 0
 1111 0050 0E4B     		ldr	r3, .L39+4
 1112 0052 0E4A     		ldr	r2, .L39+4
 1113 0054 528B     		ldrh	r2, [r2, #26]	@ movhi
 1114 0056 92B2     		uxth	r2, r2
 1115 0058 42F01002 		orr	r2, r2, #16
 1116 005c 92B2     		uxth	r2, r2
 1117 005e 5A83     		strh	r2, [r3, #26]	@ movhi
 348:App/STM32F4-Discovery/spi.c **** 		DMA_Cmd(SPIx_TX_DMA_STREAM, ENABLE);		
 1118              		.loc 1 348 0
 1119 0060 0948     		ldr	r0, .L39
 1120 0062 0121     		movs	r1, #1
 1121 0064 FFF7FEFF 		bl	DMA_Cmd
 349:App/STM32F4-Discovery/spi.c **** 		DMA_Cmd(SPIx_RX_DMA_STREAM, ENABLE);
 1122              		.loc 1 349 0
 1123 0068 0948     		ldr	r0, .L39+8
 1124 006a 0121     		movs	r1, #1
 1125 006c FFF7FEFF 		bl	DMA_Cmd
 350:App/STM32F4-Discovery/spi.c **** 		/* Block until the semaphore is given */
 351:App/STM32F4-Discovery/spi.c **** 	        xSemaphoreTake(xSemaphoreDMASPI, portMAX_DELAY);	
 1126              		.loc 1 351 0
 1127 0070 084B     		ldr	r3, .L39+12
 1128 0072 1B68     		ldr	r3, [r3]
 1129 0074 1846     		mov	r0, r3
 1130 0076 0021     		movs	r1, #0
 1131 0078 4FF0FF32 		mov	r2, #-1
 1132 007c 0023     		movs	r3, #0
 1133 007e FFF7FEFF 		bl	xQueueGenericReceive
 352:App/STM32F4-Discovery/spi.c **** 				
 353:App/STM32F4-Discovery/spi.c **** //		CSOFF(); // chip deselect 
 354:App/STM32F4-Discovery/spi.c **** 			
 355:App/STM32F4-Discovery/spi.c **** }
 1134              		.loc 1 355 0
 1135 0082 1037     		adds	r7, r7, #16
 1136 0084 BD46     		mov	sp, r7
 1137              		@ sp needed
 1138 0086 80BD     		pop	{r7, pc}
 1139              	.L40:
 1140              		.align	2
 1141              	.L39:
 1142 0088 58640240 		.word	1073898584
 1143 008c 00000240 		.word	1073872896
 1144 0090 40640240 		.word	1073898560
 1145 0094 00000000 		.word	xSemaphoreDMASPI
 1146              		.cfi_endproc
 1147              	.LFE117:
 1149              		.section	.text.spi_send,"ax",%progbits
 1150              		.align	2
 1151              		.global	spi_send
 1152              		.thumb
 1153              		.thumb_func
 1155              	spi_send:
 1156              	.LFB118:
 356:App/STM32F4-Discovery/spi.c **** 
 357:App/STM32F4-Discovery/spi.c **** 
 358:App/STM32F4-Discovery/spi.c **** void spi_send(uint16_t address, uint16_t data_len, uint8_t *data_buf)
 359:App/STM32F4-Discovery/spi.c **** {
 1157              		.loc 1 359 0
 1158              		.cfi_startproc
 1159              		@ args = 0, pretend = 0, frame = 16
 1160              		@ frame_needed = 1, uses_anonymous_args = 0
 1161 0000 80B5     		push	{r7, lr}
 1162              	.LCFI21:
 1163              		.cfi_def_cfa_offset 8
 1164              		.cfi_offset 7, -8
 1165              		.cfi_offset 14, -4
 1166 0002 84B0     		sub	sp, sp, #16
 1167              	.LCFI22:
 1168              		.cfi_def_cfa_offset 24
 1169 0004 00AF     		add	r7, sp, #0
 1170              	.LCFI23:
 1171              		.cfi_def_cfa_register 7
 1172 0006 0B46     		mov	r3, r1
 1173 0008 3A60     		str	r2, [r7]
 1174 000a 0246     		mov	r2, r0	@ movhi
 1175 000c FA80     		strh	r2, [r7, #6]	@ movhi
 1176 000e BB80     		strh	r3, [r7, #4]	@ movhi
 360:App/STM32F4-Discovery/spi.c **** 		GPIOA->BSRRH |= GPIO_Pin_4; // chip select  
 1177              		.loc 1 360 0
 1178 0010 204B     		ldr	r3, .L44
 1179 0012 204A     		ldr	r2, .L44
 1180 0014 528B     		ldrh	r2, [r2, #26]	@ movhi
 1181 0016 92B2     		uxth	r2, r2
 1182 0018 42F01002 		orr	r2, r2, #16
 1183 001c 92B2     		uxth	r2, r2
 1184 001e 5A83     		strh	r2, [r3, #26]	@ movhi
 361:App/STM32F4-Discovery/spi.c **** 		
 362:App/STM32F4-Discovery/spi.c **** 		SPI1_send((address & 0xff00) >> 8); // addres byte 1 
 1185              		.loc 1 362 0
 1186 0020 FB88     		ldrh	r3, [r7, #6]
 1187 0022 1B0A     		lsrs	r3, r3, #8
 1188 0024 9BB2     		uxth	r3, r3
 1189 0026 DBB2     		uxtb	r3, r3
 1190 0028 1846     		mov	r0, r3
 1191 002a FFF7FEFF 		bl	SPI1_send
 363:App/STM32F4-Discovery/spi.c **** 		SPI1_send((address & 0x00ff)); //address byte 2 
 1192              		.loc 1 363 0
 1193 002e FB88     		ldrh	r3, [r7, #6]	@ movhi
 1194 0030 DBB2     		uxtb	r3, r3
 1195 0032 1846     		mov	r0, r3
 1196 0034 FFF7FEFF 		bl	SPI1_send
 364:App/STM32F4-Discovery/spi.c **** 		SPI1_send((0x80 | (data_len & 0x7f00) >> 8 ));
 1197              		.loc 1 364 0
 1198 0038 BB88     		ldrh	r3, [r7, #4]
 1199 003a 03F4FE43 		and	r3, r3, #32512
 1200 003e 1B12     		asrs	r3, r3, #8
 1201 0040 DBB2     		uxtb	r3, r3
 1202 0042 63F07F03 		orn	r3, r3, #127
 1203 0046 DBB2     		uxtb	r3, r3
 1204 0048 DBB2     		uxtb	r3, r3
 1205 004a 1846     		mov	r0, r3
 1206 004c FFF7FEFF 		bl	SPI1_send
 365:App/STM32F4-Discovery/spi.c **** 		SPI1_send(data_len & 0x00ff);
 1207              		.loc 1 365 0
 1208 0050 BB88     		ldrh	r3, [r7, #4]	@ movhi
 1209 0052 DBB2     		uxtb	r3, r3
 1210 0054 1846     		mov	r0, r3
 1211 0056 FFF7FEFF 		bl	SPI1_send
 366:App/STM32F4-Discovery/spi.c **** 
 367:App/STM32F4-Discovery/spi.c **** 		int i;
 368:App/STM32F4-Discovery/spi.c **** 		for (i = 0; i < data_len; i++) SPI1_send(data_buf[i]);
 1212              		.loc 1 368 0
 1213 005a 0023     		movs	r3, #0
 1214 005c FB60     		str	r3, [r7, #12]
 1215 005e 09E0     		b	.L42
 1216              	.L43:
 1217              		.loc 1 368 0 is_stmt 0 discriminator 2
 1218 0060 FB68     		ldr	r3, [r7, #12]
 1219 0062 3A68     		ldr	r2, [r7]
 1220 0064 1344     		add	r3, r3, r2
 1221 0066 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1222 0068 1846     		mov	r0, r3
 1223 006a FFF7FEFF 		bl	SPI1_send
 1224 006e FB68     		ldr	r3, [r7, #12]
 1225 0070 0133     		adds	r3, r3, #1
 1226 0072 FB60     		str	r3, [r7, #12]
 1227              	.L42:
 1228              		.loc 1 368 0 discriminator 1
 1229 0074 BA88     		ldrh	r2, [r7, #4]
 1230 0076 FB68     		ldr	r3, [r7, #12]
 1231 0078 9A42     		cmp	r2, r3
 1232 007a F1DC     		bgt	.L43
 369:App/STM32F4-Discovery/spi.c **** 		GPIOA->BSRRL |= GPIO_Pin_4; // chip deselect 
 1233              		.loc 1 369 0 is_stmt 1
 1234 007c 054B     		ldr	r3, .L44
 1235 007e 054A     		ldr	r2, .L44
 1236 0080 128B     		ldrh	r2, [r2, #24]	@ movhi
 1237 0082 92B2     		uxth	r2, r2
 1238 0084 42F01002 		orr	r2, r2, #16
 1239 0088 92B2     		uxth	r2, r2
 1240 008a 1A83     		strh	r2, [r3, #24]	@ movhi
 370:App/STM32F4-Discovery/spi.c **** 			
 371:App/STM32F4-Discovery/spi.c **** 	
 372:App/STM32F4-Discovery/spi.c **** }
 1241              		.loc 1 372 0
 1242 008c 1037     		adds	r7, r7, #16
 1243 008e BD46     		mov	sp, r7
 1244              		@ sp needed
 1245 0090 80BD     		pop	{r7, pc}
 1246              	.L45:
 1247 0092 00BF     		.align	2
 1248              	.L44:
 1249 0094 00000240 		.word	1073872896
 1250              		.cfi_endproc
 1251              	.LFE118:
 1253              		.section	.text.spi_send2B,"ax",%progbits
 1254              		.align	2
 1255              		.global	spi_send2B
 1256              		.thumb
 1257              		.thumb_func
 1259              	spi_send2B:
 1260              	.LFB119:
 373:App/STM32F4-Discovery/spi.c **** 
 374:App/STM32F4-Discovery/spi.c **** void spi_send2B(uint16_t address,  uint16_t data_buf)
 375:App/STM32F4-Discovery/spi.c **** {
 1261              		.loc 1 375 0
 1262              		.cfi_startproc
 1263              		@ args = 0, pretend = 0, frame = 16
 1264              		@ frame_needed = 1, uses_anonymous_args = 0
 1265 0000 80B5     		push	{r7, lr}
 1266              	.LCFI24:
 1267              		.cfi_def_cfa_offset 8
 1268              		.cfi_offset 7, -8
 1269              		.cfi_offset 14, -4
 1270 0002 84B0     		sub	sp, sp, #16
 1271              	.LCFI25:
 1272              		.cfi_def_cfa_offset 24
 1273 0004 00AF     		add	r7, sp, #0
 1274              	.LCFI26:
 1275              		.cfi_def_cfa_register 7
 1276 0006 0246     		mov	r2, r0
 1277 0008 0B46     		mov	r3, r1
 1278 000a FA80     		strh	r2, [r7, #6]	@ movhi
 1279 000c BB80     		strh	r3, [r7, #4]	@ movhi
 376:App/STM32F4-Discovery/spi.c **** 		int16_t data_len = 2; 
 1280              		.loc 1 376 0
 1281 000e 0223     		movs	r3, #2
 1282 0010 FB81     		strh	r3, [r7, #14]	@ movhi
 377:App/STM32F4-Discovery/spi.c **** 		GPIOA->BSRRH |= GPIO_Pin_4; // chip select  
 1283              		.loc 1 377 0
 1284 0012 1E4B     		ldr	r3, .L47
 1285 0014 1D4A     		ldr	r2, .L47
 1286 0016 528B     		ldrh	r2, [r2, #26]	@ movhi
 1287 0018 92B2     		uxth	r2, r2
 1288 001a 42F01002 		orr	r2, r2, #16
 1289 001e 92B2     		uxth	r2, r2
 1290 0020 5A83     		strh	r2, [r3, #26]	@ movhi
 378:App/STM32F4-Discovery/spi.c **** 		
 379:App/STM32F4-Discovery/spi.c **** 		SPI1_send((address & 0xff00) >> 8); // addres byte 1 
 1291              		.loc 1 379 0
 1292 0022 FB88     		ldrh	r3, [r7, #6]
 1293 0024 1B0A     		lsrs	r3, r3, #8
 1294 0026 9BB2     		uxth	r3, r3
 1295 0028 DBB2     		uxtb	r3, r3
 1296 002a 1846     		mov	r0, r3
 1297 002c FFF7FEFF 		bl	SPI1_send
 380:App/STM32F4-Discovery/spi.c **** 		SPI1_send((address & 0x00ff)); //address byte 2 
 1298              		.loc 1 380 0
 1299 0030 FB88     		ldrh	r3, [r7, #6]	@ movhi
 1300 0032 DBB2     		uxtb	r3, r3
 1301 0034 1846     		mov	r0, r3
 1302 0036 FFF7FEFF 		bl	SPI1_send
 381:App/STM32F4-Discovery/spi.c **** 		SPI1_send((0x80 | (data_len & 0x7f00) >> 8 ));
 1303              		.loc 1 381 0
 1304 003a FB89     		ldrh	r3, [r7, #14]
 1305 003c 03F4FE43 		and	r3, r3, #32512
 1306 0040 1B12     		asrs	r3, r3, #8
 1307 0042 DBB2     		uxtb	r3, r3
 1308 0044 63F07F03 		orn	r3, r3, #127
 1309 0048 DBB2     		uxtb	r3, r3
 1310 004a DBB2     		uxtb	r3, r3
 1311 004c 1846     		mov	r0, r3
 1312 004e FFF7FEFF 		bl	SPI1_send
 382:App/STM32F4-Discovery/spi.c **** 		SPI1_send(data_len & 0x00ff);
 1313              		.loc 1 382 0
 1314 0052 FB89     		ldrh	r3, [r7, #14]	@ movhi
 1315 0054 DBB2     		uxtb	r3, r3
 1316 0056 1846     		mov	r0, r3
 1317 0058 FFF7FEFF 		bl	SPI1_send
 383:App/STM32F4-Discovery/spi.c **** 
 384:App/STM32F4-Discovery/spi.c **** 		SPI1_send((data_buf & 0xff00) >> 8);
 1318              		.loc 1 384 0
 1319 005c BB88     		ldrh	r3, [r7, #4]
 1320 005e 1B0A     		lsrs	r3, r3, #8
 1321 0060 9BB2     		uxth	r3, r3
 1322 0062 DBB2     		uxtb	r3, r3
 1323 0064 1846     		mov	r0, r3
 1324 0066 FFF7FEFF 		bl	SPI1_send
 385:App/STM32F4-Discovery/spi.c **** 		SPI1_send(data_buf & 0x00ff);
 1325              		.loc 1 385 0
 1326 006a BB88     		ldrh	r3, [r7, #4]	@ movhi
 1327 006c DBB2     		uxtb	r3, r3
 1328 006e 1846     		mov	r0, r3
 1329 0070 FFF7FEFF 		bl	SPI1_send
 386:App/STM32F4-Discovery/spi.c **** 
 387:App/STM32F4-Discovery/spi.c **** 		GPIOA->BSRRL |= GPIO_Pin_4; // chip deselect 
 1330              		.loc 1 387 0
 1331 0074 054B     		ldr	r3, .L47
 1332 0076 054A     		ldr	r2, .L47
 1333 0078 128B     		ldrh	r2, [r2, #24]	@ movhi
 1334 007a 92B2     		uxth	r2, r2
 1335 007c 42F01002 		orr	r2, r2, #16
 1336 0080 92B2     		uxth	r2, r2
 1337 0082 1A83     		strh	r2, [r3, #24]	@ movhi
 388:App/STM32F4-Discovery/spi.c **** 			
 389:App/STM32F4-Discovery/spi.c **** 	
 390:App/STM32F4-Discovery/spi.c **** }
 1338              		.loc 1 390 0
 1339 0084 1037     		adds	r7, r7, #16
 1340 0086 BD46     		mov	sp, r7
 1341              		@ sp needed
 1342 0088 80BD     		pop	{r7, pc}
 1343              	.L48:
 1344 008a 00BF     		.align	2
 1345              	.L47:
 1346 008c 00000240 		.word	1073872896
 1347              		.cfi_endproc
 1348              	.LFE119:
 1350              		.section	.text.spi_sendByte,"ax",%progbits
 1351              		.align	2
 1352              		.global	spi_sendByte
 1353              		.thumb
 1354              		.thumb_func
 1356              	spi_sendByte:
 1357              	.LFB120:
 391:App/STM32F4-Discovery/spi.c **** 
 392:App/STM32F4-Discovery/spi.c **** 
 393:App/STM32F4-Discovery/spi.c **** void spi_sendByte(uint16_t address,  uint8_t data_buf)
 394:App/STM32F4-Discovery/spi.c **** {
 1358              		.loc 1 394 0
 1359              		.cfi_startproc
 1360              		@ args = 0, pretend = 0, frame = 16
 1361              		@ frame_needed = 1, uses_anonymous_args = 0
 1362 0000 80B5     		push	{r7, lr}
 1363              	.LCFI27:
 1364              		.cfi_def_cfa_offset 8
 1365              		.cfi_offset 7, -8
 1366              		.cfi_offset 14, -4
 1367 0002 84B0     		sub	sp, sp, #16
 1368              	.LCFI28:
 1369              		.cfi_def_cfa_offset 24
 1370 0004 00AF     		add	r7, sp, #0
 1371              	.LCFI29:
 1372              		.cfi_def_cfa_register 7
 1373 0006 0246     		mov	r2, r0
 1374 0008 0B46     		mov	r3, r1
 1375 000a FA80     		strh	r2, [r7, #6]	@ movhi
 1376 000c 7B71     		strb	r3, [r7, #5]
 395:App/STM32F4-Discovery/spi.c **** 		int16_t data_len = 1; 
 1377              		.loc 1 395 0
 1378 000e 0123     		movs	r3, #1
 1379 0010 FB81     		strh	r3, [r7, #14]	@ movhi
 396:App/STM32F4-Discovery/spi.c **** 		GPIOA->BSRRH |= GPIO_Pin_4; // chip select  
 1380              		.loc 1 396 0
 1381 0012 1A4B     		ldr	r3, .L50
 1382 0014 194A     		ldr	r2, .L50
 1383 0016 528B     		ldrh	r2, [r2, #26]	@ movhi
 1384 0018 92B2     		uxth	r2, r2
 1385 001a 42F01002 		orr	r2, r2, #16
 1386 001e 92B2     		uxth	r2, r2
 1387 0020 5A83     		strh	r2, [r3, #26]	@ movhi
 397:App/STM32F4-Discovery/spi.c **** 		
 398:App/STM32F4-Discovery/spi.c **** 		SPI1_send((address & 0xff00) >> 8); // addres byte 1 
 1388              		.loc 1 398 0
 1389 0022 FB88     		ldrh	r3, [r7, #6]
 1390 0024 1B0A     		lsrs	r3, r3, #8
 1391 0026 9BB2     		uxth	r3, r3
 1392 0028 DBB2     		uxtb	r3, r3
 1393 002a 1846     		mov	r0, r3
 1394 002c FFF7FEFF 		bl	SPI1_send
 399:App/STM32F4-Discovery/spi.c **** 		SPI1_send((address & 0x00ff)); //address byte 2 
 1395              		.loc 1 399 0
 1396 0030 FB88     		ldrh	r3, [r7, #6]	@ movhi
 1397 0032 DBB2     		uxtb	r3, r3
 1398 0034 1846     		mov	r0, r3
 1399 0036 FFF7FEFF 		bl	SPI1_send
 400:App/STM32F4-Discovery/spi.c **** 		SPI1_send((0x80 | (data_len & 0x7f00) >> 8 ));
 1400              		.loc 1 400 0
 1401 003a FB89     		ldrh	r3, [r7, #14]
 1402 003c 03F4FE43 		and	r3, r3, #32512
 1403 0040 1B12     		asrs	r3, r3, #8
 1404 0042 DBB2     		uxtb	r3, r3
 1405 0044 63F07F03 		orn	r3, r3, #127
 1406 0048 DBB2     		uxtb	r3, r3
 1407 004a DBB2     		uxtb	r3, r3
 1408 004c 1846     		mov	r0, r3
 1409 004e FFF7FEFF 		bl	SPI1_send
 401:App/STM32F4-Discovery/spi.c **** 		SPI1_send(data_len & 0x00ff);
 1410              		.loc 1 401 0
 1411 0052 FB89     		ldrh	r3, [r7, #14]	@ movhi
 1412 0054 DBB2     		uxtb	r3, r3
 1413 0056 1846     		mov	r0, r3
 1414 0058 FFF7FEFF 		bl	SPI1_send
 402:App/STM32F4-Discovery/spi.c **** 
 403:App/STM32F4-Discovery/spi.c **** 		SPI1_send(data_buf);
 1415              		.loc 1 403 0
 1416 005c 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1417 005e 1846     		mov	r0, r3
 1418 0060 FFF7FEFF 		bl	SPI1_send
 404:App/STM32F4-Discovery/spi.c **** 		GPIOA->BSRRL |= GPIO_Pin_4; // chip deselect 
 1419              		.loc 1 404 0
 1420 0064 054B     		ldr	r3, .L50
 1421 0066 054A     		ldr	r2, .L50
 1422 0068 128B     		ldrh	r2, [r2, #24]	@ movhi
 1423 006a 92B2     		uxth	r2, r2
 1424 006c 42F01002 		orr	r2, r2, #16
 1425 0070 92B2     		uxth	r2, r2
 1426 0072 1A83     		strh	r2, [r3, #24]	@ movhi
 405:App/STM32F4-Discovery/spi.c **** 			
 406:App/STM32F4-Discovery/spi.c **** 	
 407:App/STM32F4-Discovery/spi.c **** }
 1427              		.loc 1 407 0
 1428 0074 1037     		adds	r7, r7, #16
 1429 0076 BD46     		mov	sp, r7
 1430              		@ sp needed
 1431 0078 80BD     		pop	{r7, pc}
 1432              	.L51:
 1433 007a 00BF     		.align	2
 1434              	.L50:
 1435 007c 00000240 		.word	1073872896
 1436              		.cfi_endproc
 1437              	.LFE120:
 1439              		.section	.text.spi_read2B,"ax",%progbits
 1440              		.align	2
 1441              		.global	spi_read2B
 1442              		.thumb
 1443              		.thumb_func
 1445              	spi_read2B:
 1446              	.LFB121:
 408:App/STM32F4-Discovery/spi.c **** 
 409:App/STM32F4-Discovery/spi.c **** 
 410:App/STM32F4-Discovery/spi.c **** uint16_t spi_read2B(uint16_t address)
 411:App/STM32F4-Discovery/spi.c **** {
 1447              		.loc 1 411 0
 1448              		.cfi_startproc
 1449              		@ args = 0, pretend = 0, frame = 24
 1450              		@ frame_needed = 1, uses_anonymous_args = 0
 1451 0000 80B5     		push	{r7, lr}
 1452              	.LCFI30:
 1453              		.cfi_def_cfa_offset 8
 1454              		.cfi_offset 7, -8
 1455              		.cfi_offset 14, -4
 1456 0002 86B0     		sub	sp, sp, #24
 1457              	.LCFI31:
 1458              		.cfi_def_cfa_offset 32
 1459 0004 00AF     		add	r7, sp, #0
 1460              	.LCFI32:
 1461              		.cfi_def_cfa_register 7
 1462 0006 0346     		mov	r3, r0
 1463 0008 FB80     		strh	r3, [r7, #6]	@ movhi
 412:App/STM32F4-Discovery/spi.c **** 		uint16_t data_len = 2; 
 1464              		.loc 1 412 0
 1465 000a 0223     		movs	r3, #2
 1466 000c 7B82     		strh	r3, [r7, #18]	@ movhi
 413:App/STM32F4-Discovery/spi.c **** 		uint8_t data_buf[4];
 414:App/STM32F4-Discovery/spi.c **** 		
 415:App/STM32F4-Discovery/spi.c **** 		data_buf[0] = ((address & 0xff00) >> 8); // addres byte 1 
 1467              		.loc 1 415 0
 1468 000e FB88     		ldrh	r3, [r7, #6]
 1469 0010 1B0A     		lsrs	r3, r3, #8
 1470 0012 9BB2     		uxth	r3, r3
 1471 0014 DBB2     		uxtb	r3, r3
 1472 0016 3B73     		strb	r3, [r7, #12]
 416:App/STM32F4-Discovery/spi.c **** 		data_buf[1] = ((address & 0x00ff)); //address byte 2 
 1473              		.loc 1 416 0
 1474 0018 FB88     		ldrh	r3, [r7, #6]	@ movhi
 1475 001a DBB2     		uxtb	r3, r3
 1476 001c 7B73     		strb	r3, [r7, #13]
 417:App/STM32F4-Discovery/spi.c **** 		data_buf[2] = ((0x00 | (data_len & 0x7f00) >> 8 ));
 1477              		.loc 1 417 0
 1478 001e 7B8A     		ldrh	r3, [r7, #18]
 1479 0020 03F4FE43 		and	r3, r3, #32512
 1480 0024 1B12     		asrs	r3, r3, #8
 1481 0026 DBB2     		uxtb	r3, r3
 1482 0028 BB73     		strb	r3, [r7, #14]
 418:App/STM32F4-Discovery/spi.c **** 		data_buf[3] = (data_len & 0x00ff);
 1483              		.loc 1 418 0
 1484 002a 7B8A     		ldrh	r3, [r7, #18]	@ movhi
 1485 002c DBB2     		uxtb	r3, r3
 1486 002e FB73     		strb	r3, [r7, #15]
 419:App/STM32F4-Discovery/spi.c **** 
 420:App/STM32F4-Discovery/spi.c **** 		int i;
 421:App/STM32F4-Discovery/spi.c **** 		for (i = 0; i < data_len; i++) data_buf[i] = 0x0;
 1487              		.loc 1 421 0
 1488 0030 0023     		movs	r3, #0
 1489 0032 7B61     		str	r3, [r7, #20]
 1490 0034 08E0     		b	.L53
 1491              	.L54:
 1492              		.loc 1 421 0 is_stmt 0 discriminator 2
 1493 0036 07F10C02 		add	r2, r7, #12
 1494 003a 7B69     		ldr	r3, [r7, #20]
 1495 003c 1344     		add	r3, r3, r2
 1496 003e 0022     		movs	r2, #0
 1497 0040 1A70     		strb	r2, [r3]
 1498 0042 7B69     		ldr	r3, [r7, #20]
 1499 0044 0133     		adds	r3, r3, #1
 1500 0046 7B61     		str	r3, [r7, #20]
 1501              	.L53:
 1502              		.loc 1 421 0 discriminator 1
 1503 0048 7A8A     		ldrh	r2, [r7, #18]
 1504 004a 7B69     		ldr	r3, [r7, #20]
 1505 004c 9A42     		cmp	r2, r3
 1506 004e F2DC     		bgt	.L54
 422:App/STM32F4-Discovery/spi.c **** 
 423:App/STM32F4-Discovery/spi.c **** 		DMA_SetCurrDataCounter(SPIx_RX_DMA_STREAM, data_len+4);
 1507              		.loc 1 423 0 is_stmt 1
 1508 0050 7B8A     		ldrh	r3, [r7, #18]	@ movhi
 1509 0052 0433     		adds	r3, r3, #4
 1510 0054 9BB2     		uxth	r3, r3
 1511 0056 1648     		ldr	r0, .L56
 1512 0058 1946     		mov	r1, r3
 1513 005a FFF7FEFF 		bl	DMA_SetCurrDataCounter
 424:App/STM32F4-Discovery/spi.c **** 		DMA_SetCurrDataCounter(SPIx_TX_DMA_STREAM, 4+data_len);
 1514              		.loc 1 424 0
 1515 005e 7B8A     		ldrh	r3, [r7, #18]	@ movhi
 1516 0060 0433     		adds	r3, r3, #4
 1517 0062 9BB2     		uxth	r3, r3
 1518 0064 1348     		ldr	r0, .L56+4
 1519 0066 1946     		mov	r1, r3
 1520 0068 FFF7FEFF 		bl	DMA_SetCurrDataCounter
 425:App/STM32F4-Discovery/spi.c **** 		SPIx_TX_DMA_STREAM->M0AR =(uint32_t) &bufferTX;	
 1521              		.loc 1 425 0
 1522 006c 114B     		ldr	r3, .L56+4
 1523 006e 124A     		ldr	r2, .L56+8
 1524 0070 DA60     		str	r2, [r3, #12]
 426:App/STM32F4-Discovery/spi.c **** 		SPIx_RX_DMA_STREAM->M0AR =(uint32_t)&bufferRX;	
 1525              		.loc 1 426 0
 1526 0072 0F4B     		ldr	r3, .L56
 1527 0074 114A     		ldr	r2, .L56+12
 1528 0076 DA60     		str	r2, [r3, #12]
 427:App/STM32F4-Discovery/spi.c **** 
 428:App/STM32F4-Discovery/spi.c **** 		CSON(); // chip select 
 1529              		.loc 1 428 0
 1530 0078 114B     		ldr	r3, .L56+16
 1531 007a 114A     		ldr	r2, .L56+16
 1532 007c 528B     		ldrh	r2, [r2, #26]	@ movhi
 1533 007e 92B2     		uxth	r2, r2
 1534 0080 42F01002 		orr	r2, r2, #16
 1535 0084 92B2     		uxth	r2, r2
 1536 0086 5A83     		strh	r2, [r3, #26]	@ movhi
 429:App/STM32F4-Discovery/spi.c **** 		DMA_Cmd(SPIx_TX_DMA_STREAM, ENABLE);		
 1537              		.loc 1 429 0
 1538 0088 0A48     		ldr	r0, .L56+4
 1539 008a 0121     		movs	r1, #1
 1540 008c FFF7FEFF 		bl	DMA_Cmd
 430:App/STM32F4-Discovery/spi.c **** 		DMA_Cmd(SPIx_RX_DMA_STREAM, ENABLE);
 1541              		.loc 1 430 0
 1542 0090 0748     		ldr	r0, .L56
 1543 0092 0121     		movs	r1, #1
 1544 0094 FFF7FEFF 		bl	DMA_Cmd
 431:App/STM32F4-Discovery/spi.c **** 		//CSOFF(); // chip deselect		
 432:App/STM32F4-Discovery/spi.c **** 
 433:App/STM32F4-Discovery/spi.c **** 		return (data_buf[0] << 8) | data_buf[1];
 1545              		.loc 1 433 0
 1546 0098 3B7B     		ldrb	r3, [r7, #12]	@ zero_extendqisi2
 1547 009a 1B02     		lsls	r3, r3, #8
 1548 009c 9AB2     		uxth	r2, r3
 1549 009e 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 1550 00a0 1343     		orrs	r3, r3, r2
 1551 00a2 9BB2     		uxth	r3, r3
 1552 00a4 9BB2     		uxth	r3, r3
 434:App/STM32F4-Discovery/spi.c **** 
 435:App/STM32F4-Discovery/spi.c **** }
 1553              		.loc 1 435 0
 1554 00a6 1846     		mov	r0, r3
 1555 00a8 1837     		adds	r7, r7, #24
 1556 00aa BD46     		mov	sp, r7
 1557              		@ sp needed
 1558 00ac 80BD     		pop	{r7, pc}
 1559              	.L57:
 1560 00ae 00BF     		.align	2
 1561              	.L56:
 1562 00b0 40640240 		.word	1073898560
 1563 00b4 58640240 		.word	1073898584
 1564 00b8 00000000 		.word	bufferTX
 1565 00bc 00000000 		.word	bufferRX
 1566 00c0 00000240 		.word	1073872896
 1567              		.cfi_endproc
 1568              	.LFE121:
 1570              		.section	.text.spi_dma_read,"ax",%progbits
 1571              		.align	2
 1572              		.global	spi_dma_read
 1573              		.thumb
 1574              		.thumb_func
 1576              	spi_dma_read:
 1577              	.LFB122:
 436:App/STM32F4-Discovery/spi.c **** void spi_dma_read(uint16_t address, uint16_t data_len)
 437:App/STM32F4-Discovery/spi.c **** {
 1578              		.loc 1 437 0
 1579              		.cfi_startproc
 1580              		@ args = 0, pretend = 0, frame = 24
 1581              		@ frame_needed = 1, uses_anonymous_args = 0
 1582 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1583              	.LCFI33:
 1584              		.cfi_def_cfa_offset 24
 1585              		.cfi_offset 4, -24
 1586              		.cfi_offset 5, -20
 1587              		.cfi_offset 6, -16
 1588              		.cfi_offset 7, -12
 1589              		.cfi_offset 8, -8
 1590              		.cfi_offset 14, -4
 1591 0004 86B0     		sub	sp, sp, #24
 1592              	.LCFI34:
 1593              		.cfi_def_cfa_offset 48
 1594 0006 00AF     		add	r7, sp, #0
 1595              	.LCFI35:
 1596              		.cfi_def_cfa_register 7
 1597 0008 F880     		strh	r0, [r7, #6]	@ movhi
 1598 000a B980     		strh	r1, [r7, #4]	@ movhi
 1599 000c 6946     		mov	r1, sp
 1600 000e 8846     		mov	r8, r1
 438:App/STM32F4-Discovery/spi.c **** 		uint8_t buffer[data_len+4];
 1601              		.loc 1 438 0
 1602 0010 B988     		ldrh	r1, [r7, #4]
 1603 0012 0E1D     		adds	r6, r1, #4
 1604 0014 711E     		subs	r1, r6, #1
 1605 0016 3961     		str	r1, [r7, #16]
 1606 0018 3146     		mov	r1, r6
 1607 001a 0846     		mov	r0, r1
 1608 001c 4FF00001 		mov	r1, #0
 1609 0020 CD00     		lsls	r5, r1, #3
 1610 0022 45EA5075 		orr	r5, r5, r0, lsr #29
 1611 0026 C400     		lsls	r4, r0, #3
 1612 0028 3146     		mov	r1, r6
 1613 002a 0846     		mov	r0, r1
 1614 002c 4FF00001 		mov	r1, #0
 1615 0030 CB00     		lsls	r3, r1, #3
 1616 0032 43EA5073 		orr	r3, r3, r0, lsr #29
 1617 0036 C200     		lsls	r2, r0, #3
 1618 0038 3346     		mov	r3, r6
 1619 003a 0733     		adds	r3, r3, #7
 1620 003c DB08     		lsrs	r3, r3, #3
 1621 003e DB00     		lsls	r3, r3, #3
 1622 0040 ADEB030D 		sub	sp, sp, r3
 1623 0044 6B46     		mov	r3, sp
 1624 0046 0033     		adds	r3, r3, #0
 1625 0048 FB60     		str	r3, [r7, #12]
 439:App/STM32F4-Discovery/spi.c **** 		buffer[0] = ((address & 0xff00) >> 8); // addres byte 1 
 1626              		.loc 1 439 0
 1627 004a FB88     		ldrh	r3, [r7, #6]
 1628 004c 1B0A     		lsrs	r3, r3, #8
 1629 004e 9BB2     		uxth	r3, r3
 1630 0050 DAB2     		uxtb	r2, r3
 1631 0052 FB68     		ldr	r3, [r7, #12]
 1632 0054 1A70     		strb	r2, [r3]
 440:App/STM32F4-Discovery/spi.c **** 		buffer[1] = ((address & 0x00ff)); //address byte 2 
 1633              		.loc 1 440 0
 1634 0056 FB88     		ldrh	r3, [r7, #6]	@ movhi
 1635 0058 DAB2     		uxtb	r2, r3
 1636 005a FB68     		ldr	r3, [r7, #12]
 1637 005c 5A70     		strb	r2, [r3, #1]
 441:App/STM32F4-Discovery/spi.c **** 		buffer[2] = ((0x00 | (data_len & 0x7f00) >> 8 ));
 1638              		.loc 1 441 0
 1639 005e BB88     		ldrh	r3, [r7, #4]
 1640 0060 03F4FE43 		and	r3, r3, #32512
 1641 0064 1B12     		asrs	r3, r3, #8
 1642 0066 DAB2     		uxtb	r2, r3
 1643 0068 FB68     		ldr	r3, [r7, #12]
 1644 006a 9A70     		strb	r2, [r3, #2]
 442:App/STM32F4-Discovery/spi.c **** 		buffer[3] = (data_len & 0x00ff);
 1645              		.loc 1 442 0
 1646 006c BB88     		ldrh	r3, [r7, #4]	@ movhi
 1647 006e DAB2     		uxtb	r2, r3
 1648 0070 FB68     		ldr	r3, [r7, #12]
 1649 0072 DA70     		strb	r2, [r3, #3]
 443:App/STM32F4-Discovery/spi.c **** 
 444:App/STM32F4-Discovery/spi.c **** 		int i;
 445:App/STM32F4-Discovery/spi.c **** 		for (i = 4 ; i < data_len+4; i++) buffer[i] = 0x0;
 1650              		.loc 1 445 0
 1651 0074 0423     		movs	r3, #4
 1652 0076 7B61     		str	r3, [r7, #20]
 1653 0078 07E0     		b	.L59
 1654              	.L60:
 1655              		.loc 1 445 0 is_stmt 0 discriminator 2
 1656 007a FA68     		ldr	r2, [r7, #12]
 1657 007c 7B69     		ldr	r3, [r7, #20]
 1658 007e 1344     		add	r3, r3, r2
 1659 0080 0022     		movs	r2, #0
 1660 0082 1A70     		strb	r2, [r3]
 1661 0084 7B69     		ldr	r3, [r7, #20]
 1662 0086 0133     		adds	r3, r3, #1
 1663 0088 7B61     		str	r3, [r7, #20]
 1664              	.L59:
 1665              		.loc 1 445 0 discriminator 1
 1666 008a BB88     		ldrh	r3, [r7, #4]
 1667 008c 1A1D     		adds	r2, r3, #4
 1668 008e 7B69     		ldr	r3, [r7, #20]
 1669 0090 9A42     		cmp	r2, r3
 1670 0092 F2DC     		bgt	.L60
 446:App/STM32F4-Discovery/spi.c **** 
 447:App/STM32F4-Discovery/spi.c **** 		DMA_SetCurrDataCounter(SPIx_RX_DMA_STREAM, data_len+4);
 1671              		.loc 1 447 0 is_stmt 1
 1672 0094 BB88     		ldrh	r3, [r7, #4]	@ movhi
 1673 0096 0433     		adds	r3, r3, #4
 1674 0098 9BB2     		uxth	r3, r3
 1675 009a 1748     		ldr	r0, .L61
 1676 009c 1946     		mov	r1, r3
 1677 009e FFF7FEFF 		bl	DMA_SetCurrDataCounter
 448:App/STM32F4-Discovery/spi.c **** 		DMA_SetCurrDataCounter(SPIx_TX_DMA_STREAM, 4+data_len);
 1678              		.loc 1 448 0
 1679 00a2 BB88     		ldrh	r3, [r7, #4]	@ movhi
 1680 00a4 0433     		adds	r3, r3, #4
 1681 00a6 9BB2     		uxth	r3, r3
 1682 00a8 1448     		ldr	r0, .L61+4
 1683 00aa 1946     		mov	r1, r3
 1684 00ac FFF7FEFF 		bl	DMA_SetCurrDataCounter
 449:App/STM32F4-Discovery/spi.c **** 		SPIx_TX_DMA_STREAM->M0AR =(uint32_t) &buffer;	
 1685              		.loc 1 449 0
 1686 00b0 124B     		ldr	r3, .L61+4
 1687 00b2 FA68     		ldr	r2, [r7, #12]
 1688 00b4 DA60     		str	r2, [r3, #12]
 450:App/STM32F4-Discovery/spi.c **** 		SPIx_RX_DMA_STREAM->M0AR =(uint32_t)&bufferRX;	
 1689              		.loc 1 450 0
 1690 00b6 104B     		ldr	r3, .L61
 1691 00b8 114A     		ldr	r2, .L61+8
 1692 00ba DA60     		str	r2, [r3, #12]
 451:App/STM32F4-Discovery/spi.c **** 
 452:App/STM32F4-Discovery/spi.c **** 		CSON(); // chip select 
 1693              		.loc 1 452 0
 1694 00bc 114B     		ldr	r3, .L61+12
 1695 00be 114A     		ldr	r2, .L61+12
 1696 00c0 528B     		ldrh	r2, [r2, #26]	@ movhi
 1697 00c2 92B2     		uxth	r2, r2
 1698 00c4 42F01002 		orr	r2, r2, #16
 1699 00c8 92B2     		uxth	r2, r2
 1700 00ca 5A83     		strh	r2, [r3, #26]	@ movhi
 453:App/STM32F4-Discovery/spi.c **** 		DMA_Cmd(SPIx_TX_DMA_STREAM, ENABLE);		
 1701              		.loc 1 453 0
 1702 00cc 0B48     		ldr	r0, .L61+4
 1703 00ce 0121     		movs	r1, #1
 1704 00d0 FFF7FEFF 		bl	DMA_Cmd
 454:App/STM32F4-Discovery/spi.c **** 		DMA_Cmd(SPIx_RX_DMA_STREAM, ENABLE);
 1705              		.loc 1 454 0
 1706 00d4 0848     		ldr	r0, .L61
 1707 00d6 0121     		movs	r1, #1
 1708 00d8 FFF7FEFF 		bl	DMA_Cmd
 455:App/STM32F4-Discovery/spi.c **** 		/* Block until the semaphore is given */
 456:App/STM32F4-Discovery/spi.c ****         	xSemaphoreTake(xSemaphoreDMASPI, portMAX_DELAY);	
 1709              		.loc 1 456 0
 1710 00dc 0A4B     		ldr	r3, .L61+16
 1711 00de 1B68     		ldr	r3, [r3]
 1712 00e0 1846     		mov	r0, r3
 1713 00e2 0021     		movs	r1, #0
 1714 00e4 4FF0FF32 		mov	r2, #-1
 1715 00e8 0023     		movs	r3, #0
 1716 00ea FFF7FEFF 		bl	xQueueGenericReceive
 1717 00ee C546     		mov	sp, r8
 457:App/STM32F4-Discovery/spi.c **** 		//CSOFF(); // chip deselect		
 458:App/STM32F4-Discovery/spi.c **** 
 459:App/STM32F4-Discovery/spi.c **** }	
 1718              		.loc 1 459 0
 1719 00f0 1837     		adds	r7, r7, #24
 1720 00f2 BD46     		mov	sp, r7
 1721              		@ sp needed
 1722 00f4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1723              	.L62:
 1724              		.align	2
 1725              	.L61:
 1726 00f8 40640240 		.word	1073898560
 1727 00fc 58640240 		.word	1073898584
 1728 0100 00000000 		.word	bufferRX
 1729 0104 00000240 		.word	1073872896
 1730 0108 00000000 		.word	xSemaphoreDMASPI
 1731              		.cfi_endproc
 1732              	.LFE122:
 1734              		.section	.text.spi_read,"ax",%progbits
 1735              		.align	2
 1736              		.global	spi_read
 1737              		.thumb
 1738              		.thumb_func
 1740              	spi_read:
 1741              	.LFB123:
 460:App/STM32F4-Discovery/spi.c **** void spi_read(uint16_t address, uint16_t data_len, uint8_t *data_buf)
 461:App/STM32F4-Discovery/spi.c **** {
 1742              		.loc 1 461 0
 1743              		.cfi_startproc
 1744              		@ args = 0, pretend = 0, frame = 16
 1745              		@ frame_needed = 1, uses_anonymous_args = 0
 1746 0000 90B5     		push	{r4, r7, lr}
 1747              	.LCFI36:
 1748              		.cfi_def_cfa_offset 12
 1749              		.cfi_offset 4, -12
 1750              		.cfi_offset 7, -8
 1751              		.cfi_offset 14, -4
 1752 0002 85B0     		sub	sp, sp, #20
 1753              	.LCFI37:
 1754              		.cfi_def_cfa_offset 32
 1755 0004 00AF     		add	r7, sp, #0
 1756              	.LCFI38:
 1757              		.cfi_def_cfa_register 7
 1758 0006 0B46     		mov	r3, r1
 1759 0008 3A60     		str	r2, [r7]
 1760 000a 0246     		mov	r2, r0	@ movhi
 1761 000c FA80     		strh	r2, [r7, #6]	@ movhi
 1762 000e BB80     		strh	r3, [r7, #4]	@ movhi
 462:App/STM32F4-Discovery/spi.c **** 		GPIOA->BSRRH |= GPIO_Pin_4; // chip select  
 1763              		.loc 1 462 0
 1764 0010 1E4B     		ldr	r3, .L66
 1765 0012 1E4A     		ldr	r2, .L66
 1766 0014 528B     		ldrh	r2, [r2, #26]	@ movhi
 1767 0016 92B2     		uxth	r2, r2
 1768 0018 42F01002 		orr	r2, r2, #16
 1769 001c 92B2     		uxth	r2, r2
 1770 001e 5A83     		strh	r2, [r3, #26]	@ movhi
 463:App/STM32F4-Discovery/spi.c **** 		
 464:App/STM32F4-Discovery/spi.c **** 		SPI1_send((address & 0xff00) >> 8); // addres byte 1 
 1771              		.loc 1 464 0
 1772 0020 FB88     		ldrh	r3, [r7, #6]
 1773 0022 1B0A     		lsrs	r3, r3, #8
 1774 0024 9BB2     		uxth	r3, r3
 1775 0026 DBB2     		uxtb	r3, r3
 1776 0028 1846     		mov	r0, r3
 1777 002a FFF7FEFF 		bl	SPI1_send
 465:App/STM32F4-Discovery/spi.c **** 		SPI1_send((address & 0x00ff)); //address byte 2 
 1778              		.loc 1 465 0
 1779 002e FB88     		ldrh	r3, [r7, #6]	@ movhi
 1780 0030 DBB2     		uxtb	r3, r3
 1781 0032 1846     		mov	r0, r3
 1782 0034 FFF7FEFF 		bl	SPI1_send
 466:App/STM32F4-Discovery/spi.c **** 		SPI1_send((0x00 | (data_len & 0x7f00) >> 8 ));
 1783              		.loc 1 466 0
 1784 0038 BB88     		ldrh	r3, [r7, #4]
 1785 003a 03F4FE43 		and	r3, r3, #32512
 1786 003e 1B12     		asrs	r3, r3, #8
 1787 0040 DBB2     		uxtb	r3, r3
 1788 0042 1846     		mov	r0, r3
 1789 0044 FFF7FEFF 		bl	SPI1_send
 467:App/STM32F4-Discovery/spi.c **** 		SPI1_send(data_len & 0x00ff);
 1790              		.loc 1 467 0
 1791 0048 BB88     		ldrh	r3, [r7, #4]	@ movhi
 1792 004a DBB2     		uxtb	r3, r3
 1793 004c 1846     		mov	r0, r3
 1794 004e FFF7FEFF 		bl	SPI1_send
 468:App/STM32F4-Discovery/spi.c **** 
 469:App/STM32F4-Discovery/spi.c **** 		int i;
 470:App/STM32F4-Discovery/spi.c **** 		for (i = 0; i < data_len; i++)
 1795              		.loc 1 470 0
 1796 0052 0023     		movs	r3, #0
 1797 0054 FB60     		str	r3, [r7, #12]
 1798 0056 09E0     		b	.L64
 1799              	.L65:
 471:App/STM32F4-Discovery/spi.c **** 		{
 472:App/STM32F4-Discovery/spi.c **** 		
 473:App/STM32F4-Discovery/spi.c **** 			 data_buf[i] = SPI1_recive();
 1800              		.loc 1 473 0 discriminator 2
 1801 0058 FB68     		ldr	r3, [r7, #12]
 1802 005a 3A68     		ldr	r2, [r7]
 1803 005c D418     		adds	r4, r2, r3
 1804 005e FFF7FEFF 		bl	SPI1_recive
 1805 0062 0346     		mov	r3, r0
 1806 0064 2370     		strb	r3, [r4]
 470:App/STM32F4-Discovery/spi.c **** 		for (i = 0; i < data_len; i++)
 1807              		.loc 1 470 0 discriminator 2
 1808 0066 FB68     		ldr	r3, [r7, #12]
 1809 0068 0133     		adds	r3, r3, #1
 1810 006a FB60     		str	r3, [r7, #12]
 1811              	.L64:
 470:App/STM32F4-Discovery/spi.c **** 		for (i = 0; i < data_len; i++)
 1812              		.loc 1 470 0 is_stmt 0 discriminator 1
 1813 006c BA88     		ldrh	r2, [r7, #4]
 1814 006e FB68     		ldr	r3, [r7, #12]
 1815 0070 9A42     		cmp	r2, r3
 1816 0072 F1DC     		bgt	.L65
 474:App/STM32F4-Discovery/spi.c **** 			
 475:App/STM32F4-Discovery/spi.c **** 		}
 476:App/STM32F4-Discovery/spi.c **** 		GPIOA->BSRRL |= GPIO_Pin_4; // chip deselect 
 1817              		.loc 1 476 0 is_stmt 1
 1818 0074 054B     		ldr	r3, .L66
 1819 0076 054A     		ldr	r2, .L66
 1820 0078 128B     		ldrh	r2, [r2, #24]	@ movhi
 1821 007a 92B2     		uxth	r2, r2
 1822 007c 42F01002 		orr	r2, r2, #16
 1823 0080 92B2     		uxth	r2, r2
 1824 0082 1A83     		strh	r2, [r3, #24]	@ movhi
 477:App/STM32F4-Discovery/spi.c **** 			
 478:App/STM32F4-Discovery/spi.c **** 	
 479:App/STM32F4-Discovery/spi.c **** }
 1825              		.loc 1 479 0
 1826 0084 1437     		adds	r7, r7, #20
 1827 0086 BD46     		mov	sp, r7
 1828              		@ sp needed
 1829 0088 90BD     		pop	{r4, r7, pc}
 1830              	.L67:
 1831 008a 00BF     		.align	2
 1832              	.L66:
 1833 008c 00000240 		.word	1073872896
 1834              		.cfi_endproc
 1835              	.LFE123:
 1837              		.text
 1838              	.Letext0:
 1839              		.file 2 "/Users/maticknap/Downloads/gcc-arm-none-eabi-4_8-2014q2/arm-none-eabi/include/machine/_de
 1840              		.file 3 "/Users/maticknap/Downloads/gcc-arm-none-eabi-4_8-2014q2/arm-none-eabi/include/stdint.h"
 1841              		.file 4 "App/STM32F4-Discovery/Libraries/CMSIS/ST/STM32F4xx/Include/stm32f4xx.h"
 1842              		.file 5 "App/STM32F4-Discovery/Libraries/STM32F4xx_StdPeriph_Driver/inc/stm32f4xx_dma.h"
 1843              		.file 6 "App/STM32F4-Discovery/Libraries/STM32F4xx_StdPeriph_Driver/inc/stm32f4xx_exti.h"
 1844              		.file 7 "App/STM32F4-Discovery/Libraries/STM32F4xx_StdPeriph_Driver/inc/stm32f4xx_gpio.h"
 1845              		.file 8 "App/STM32F4-Discovery/Libraries/STM32F4xx_StdPeriph_Driver/inc/stm32f4xx_spi.h"
 1846              		.file 9 "App/STM32F4-Discovery/Libraries/STM32F4xx_StdPeriph_Driver/inc/misc.h"
 1847              		.file 10 "Source/portable/GCC/ARM_CM4F/portmacro.h"
 1848              		.file 11 "Source/include/queue.h"
 1849              		.file 12 "Source/include/semphr.h"
 1850              		.file 13 "Source/include/task.h"
 1851              		.file 14 "App/STM32F4-Discovery/spi.h"
 1852              		.file 15 "App/STM32F4-Discovery/Libraries/CMSIS/Include/core_cm4.h"
 1853              		.file 16 "App/STM32F4-Discovery/W5200.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 spi.c
                            *COM*:00000000000007d0 bufferTX
                            *COM*:00000000000007d0 bufferRX
                            *COM*:0000000000000004 bufferRXidx
                            *COM*:0000000000000004 bufferTXidx
                            *COM*:0000000000000004 dat_lengthRX
                            *COM*:0000000000000004 dat_lengthTX
                            *COM*:0000000000000004 xSemaphoreDMASPI
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:27     .bss.xHigherPriorityTaskWoken:0000000000000000 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:30     .bss.xHigherPriorityTaskWoken:0000000000000000 xHigherPriorityTaskWoken
                            *COM*:0000000000000004 set_macTaskHandle
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:34     .text.init_SPI1:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:39     .text.init_SPI1:0000000000000000 init_SPI1
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:440    .text.init_SPI1:00000000000002d4 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:451    .text.DMA2_Stream2_IRQHandler:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:456    .text.DMA2_Stream2_IRQHandler:0000000000000000 DMA2_Stream2_IRQHandler
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:535    .text.DMA2_Stream2_IRQHandler:0000000000000074 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:547    .text.DMA2_Stream3_IRQHandler:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:552    .text.DMA2_Stream3_IRQHandler:0000000000000000 DMA2_Stream3_IRQHandler
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:631    .text.DMA2_Stream3_IRQHandler:0000000000000074 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:643    .text.SPI1_send:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:648    .text.SPI1_send:0000000000000000 SPI1_send
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:709    .text.SPI1_send:000000000000004c $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:714    .text.SPI1_recive:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:719    .text.SPI1_recive:0000000000000000 SPI1_recive
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:768    .text.SPI1_recive:000000000000003c $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:773    .text.spi_dma_send:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:778    .text.spi_dma_send:0000000000000000 spi_dma_send
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:929    .text.spi_dma_send:0000000000000100 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:937    .text.spi_dma_send2B:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:942    .text.spi_dma_send2B:0000000000000000 spi_dma_send2B
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1039   .text.spi_dma_send2B:0000000000000094 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1047   .text.spi_dma_sendByte:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1052   .text.spi_dma_sendByte:0000000000000000 spi_dma_sendByte
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1142   .text.spi_dma_sendByte:0000000000000088 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1150   .text.spi_send:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1155   .text.spi_send:0000000000000000 spi_send
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1249   .text.spi_send:0000000000000094 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1254   .text.spi_send2B:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1259   .text.spi_send2B:0000000000000000 spi_send2B
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1346   .text.spi_send2B:000000000000008c $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1351   .text.spi_sendByte:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1356   .text.spi_sendByte:0000000000000000 spi_sendByte
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1435   .text.spi_sendByte:000000000000007c $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1440   .text.spi_read2B:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1445   .text.spi_read2B:0000000000000000 spi_read2B
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1562   .text.spi_read2B:00000000000000b0 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1571   .text.spi_dma_read:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1576   .text.spi_dma_read:0000000000000000 spi_dma_read
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1726   .text.spi_dma_read:00000000000000f8 $d
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1735   .text.spi_read:0000000000000000 $t
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1740   .text.spi_read:0000000000000000 spi_read
/var/folders/55/hyqmw0c94z570kz3rqrpw4jc0000gn/T//ccww8PLy.s:1833   .text.spi_read:000000000000008c $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
RCC_AHB1PeriphClockCmd
GPIO_Init
GPIO_PinAFConfig
RCC_APB2PeriphClockCmd
SPI_Init
SPI_Cmd
DMA_DeInit
DMA_GetCmdStatus
DMA_StructInit
DMA_Init
DMA_ITConfig
SPI_I2S_ClearFlag
NVIC_Init
SPI_I2S_DMACmd
SYSCFG_EXTILineConfig
EXTI_Init
DMA_GetITStatus
DMA_ClearITPendingBit
SPI_I2S_GetFlagStatus
DMA_Cmd
vPortEnterCritical
xQueueGenericSend
vPortExitCritical
SPI_I2S_SendData
SPI_I2S_ReceiveData
DMA_SetCurrDataCounter
xQueueGenericReceive
